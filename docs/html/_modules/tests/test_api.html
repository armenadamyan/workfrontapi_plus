
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">

<html xmlns="http://www.w3.org/1999/xhtml" lang="en">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    <title>tests.test_api &#8212; workfrontapi_plus Version 1.0.23 documentation</title>
    <link rel="stylesheet" href="../../_static/alabaster.css" type="text/css" />
    <link rel="stylesheet" href="../../_static/pygments.css" type="text/css" />
    <script type="text/javascript">
      var DOCUMENTATION_OPTIONS = {
        URL_ROOT:    '../../',
        VERSION:     'Version 1.0.23',
        COLLAPSE_INDEX: false,
        FILE_SUFFIX: '.html',
        HAS_SOURCE:  true,
        SOURCELINK_SUFFIX: '.txt'
      };
    </script>
    <script type="text/javascript" src="../../_static/jquery.js"></script>
    <script type="text/javascript" src="../../_static/underscore.js"></script>
    <script type="text/javascript" src="../../_static/doctools.js"></script>
    <link rel="index" title="Index" href="../../genindex.html" />
    <link rel="search" title="Search" href="../../search.html" />
   
  <link rel="stylesheet" href="../../_static/custom.css" type="text/css" />
  
  
  <meta name="viewport" content="width=device-width, initial-scale=0.9, maximum-scale=0.9" />

  </head>
  <body>
  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body" role="main">
            
  <h1>Source code for tests.test_api</h1><div class="highlight"><pre>
<span class="sd">&quot;&quot;&quot;</span>
<span class="sd">Copyright 2017, Integrated Device Technologies, Inc.</span>

<span class="sd">Permission is hereby granted, free of charge, to any person obtaining a copy</span>
<span class="sd">of this software and associated documentation files (the &quot;Software&quot;), to deal</span>
<span class="sd">in the Software without restriction, including without limitation the rights</span>
<span class="sd">to use, copy, modify, merge, publish, distribute, sublicense, and/or sell</span>
<span class="sd">copies of the Software, and to permit persons to whom the Software is</span>
<span class="sd">furnished to do so, subject to the following conditions:</span>

<span class="sd">The above copyright notice and this permission notice shall be included in all</span>
<span class="sd">copies or substantial portions of the Software.</span>

<span class="sd">THE SOFTWARE IS PROVIDED &quot;AS IS&quot;, WITHOUT WARRANTY OF ANY KIND, EXPRESS OR</span>
<span class="sd">IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,</span>
<span class="sd">FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE</span>
<span class="sd">AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER</span>
<span class="sd">LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,</span>
<span class="sd">OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE</span>
<span class="sd">SOFTWARE.</span>

<span class="sd">Authors: Roshan Bal, Craig Lathrop</span>
<span class="sd">&quot;&quot;&quot;</span>

<span class="kn">from</span> <span class="nn">unittest</span> <span class="k">import</span> <span class="n">TestCase</span>
<span class="kn">from</span> <span class="nn">workfrontapi_plus</span> <span class="k">import</span> <span class="n">Api</span>

<span class="kn">from</span> <span class="nn">wfconfig</span> <span class="k">import</span> <span class="n">WorkfrontConfig</span>

<span class="kn">import</span> <span class="nn">hashlib</span><span class="o">,</span> <span class="nn">json</span><span class="o">,</span> <span class="nn">requests</span>
<span class="kn">from</span> <span class="nn">nose.tools</span> <span class="k">import</span> <span class="n">assert_true</span>

<span class="sd">&#39;&#39;&#39;https://realpython.com/blog/python/testing-third-party-apis-with-mocks/&#39;&#39;&#39;</span>


<div class="viewcode-block" id="TestWorkfront"><a class="viewcode-back" href="../../tests.html#tests.test_api.TestWorkfront">[docs]</a><span class="k">class</span> <span class="nc">TestWorkfront</span><span class="p">(</span><span class="n">TestCase</span><span class="p">):</span>
    <span class="n">api</span> <span class="o">=</span> <span class="n">Api</span><span class="p">(</span><span class="n">WorkfrontConfig</span><span class="o">.</span><span class="n">subdomain</span><span class="p">,</span> <span class="s">&#39;preview&#39;</span><span class="p">,</span> <span class="n">api_key</span><span class="o">=</span><span class="n">WorkfrontConfig</span><span class="o">.</span><span class="n">api_key</span><span class="p">)</span>

    <span class="c">######## UTILITY METHODS ##########</span>
<div class="viewcode-block" id="TestWorkfront.hash_dict"><a class="viewcode-back" href="../../tests.html#tests.test_api.TestWorkfront.hash_dict">[docs]</a>    <span class="nd">@staticmethod</span>
    <span class="k">def</span> <span class="nf">hash_dict</span><span class="p">(</span><span class="n">some_dict</span><span class="p">,</span> <span class="n">make_list</span><span class="o">=</span><span class="k">False</span><span class="p">):</span>
        <span class="n">dict_string</span> <span class="o">=</span> <span class="n">json</span><span class="o">.</span><span class="n">dumps</span><span class="p">(</span><span class="n">some_dict</span><span class="p">,</span> <span class="n">sort_keys</span><span class="o">=</span><span class="k">True</span><span class="p">)</span>
        <span class="n">dict_string</span> <span class="o">=</span> <span class="n">dict_string</span><span class="o">.</span><span class="n">encode</span><span class="p">(</span><span class="s">&#39;ascii&#39;</span><span class="p">,</span> <span class="s">&#39;ignore&#39;</span><span class="p">)</span>
        <span class="n">res</span> <span class="o">=</span> <span class="n">hashlib</span><span class="o">.</span><span class="n">sha1</span><span class="p">(</span><span class="n">dict_string</span><span class="p">)</span><span class="o">.</span><span class="n">hexdigest</span><span class="p">()</span>
        <span class="k">return</span> <span class="p">[</span><span class="n">res</span><span class="p">]</span> <span class="k">if</span> <span class="n">make_list</span> <span class="k">else</span> <span class="n">res</span></div>

<div class="viewcode-block" id="TestWorkfront.api_response"><a class="viewcode-back" href="../../tests.html#tests.test_api.TestWorkfront.api_response">[docs]</a>    <span class="nd">@staticmethod</span>
    <span class="k">def</span> <span class="nf">api_response</span><span class="p">(</span><span class="n">data</span><span class="p">,</span> <span class="n">dest</span><span class="p">):</span>
        <span class="n">params_dict</span> <span class="o">=</span> <span class="p">{}</span>
        <span class="n">data</span> <span class="o">=</span> <span class="nb">str</span><span class="p">(</span><span class="n">data</span><span class="p">)</span>
        <span class="n">data_list</span> <span class="o">=</span> <span class="n">data</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="s">&quot;&amp;&quot;</span><span class="p">)</span>
        <span class="n">data_output_list</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="k">for</span> <span class="n">item</span> <span class="ow">in</span> <span class="n">data_list</span><span class="p">:</span>
            <span class="n">key_value_split</span> <span class="o">=</span> <span class="n">item</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="s">&quot;=&quot;</span><span class="p">)</span>
            <span class="c"># str() because some stuff is byte vale b&quot;...&quot;</span>
            <span class="n">params_dict</span><span class="p">[</span><span class="nb">str</span><span class="p">(</span><span class="n">key_value_split</span><span class="p">[</span><span class="mi">0</span><span class="p">])]</span> <span class="o">=</span> <span class="nb">str</span><span class="p">(</span><span class="n">key_value_split</span><span class="p">[</span><span class="mi">1</span><span class="p">])</span>
            <span class="n">data_output_list</span><span class="o">.</span><span class="n">append</span><span class="p">({</span><span class="n">key_value_split</span><span class="p">[</span><span class="mi">0</span><span class="p">]:</span> <span class="n">key_value_split</span><span class="p">[</span><span class="mi">1</span><span class="p">]})</span>

        <span class="n">params_dict</span><span class="p">[</span><span class="s">&#39;path&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">dest</span>
        <span class="n">params_dict</span><span class="p">[</span><span class="s">&#39;data&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">data_output_list</span>

        <span class="k">return</span> <span class="n">params_dict</span></div>

        <span class="c"># @staticmethod</span>
        <span class="c"># def test_api():</span>
        <span class="c">#     res = requests.get()</span>

    <span class="c">########  LIVE E2E TESTS #############</span>

<div class="viewcode-block" id="TestWorkfront.e2e_controller"><a class="viewcode-back" href="../../tests.html#tests.test_api.TestWorkfront.e2e_controller">[docs]</a>    <span class="k">def</span> <span class="nf">e2e_controller</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">pass</span></div>

<div class="viewcode-block" id="TestWorkfront.test_live_search"><a class="viewcode-back" href="../../tests.html#tests.test_api.TestWorkfront.test_live_search">[docs]</a>    <span class="k">def</span> <span class="nf">test_live_search</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">api</span><span class="o">.</span><span class="n">_request</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">api</span><span class="o">.</span><span class="n">_make_request</span>
        <span class="n">res</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">api</span><span class="o">.</span><span class="n">search</span><span class="p">(</span><span class="s">&#39;task&#39;</span><span class="p">,</span> <span class="p">{</span><span class="s">&#39;name&#39;</span><span class="p">:</span> <span class="s">&#39;cra&#39;</span><span class="p">,</span> <span class="s">&#39;name_Mod&#39;</span><span class="p">:</span> <span class="s">&#39;cicontains&#39;</span><span class="p">},</span> <span class="p">[</span><span class="s">&#39;name&#39;</span><span class="p">])</span>
        <span class="nb">print</span><span class="p">(</span><span class="n">res</span><span class="p">[</span><span class="mi">0</span><span class="p">])</span>
        <span class="n">assert_true</span><span class="p">(</span><span class="nb">isinstance</span><span class="p">(</span><span class="n">res</span><span class="p">,</span> <span class="nb">list</span><span class="p">))</span></div>

    <span class="c"># def test_make_error(self):</span>
    <span class="c">#     self.api._request = self.api._make_request</span>
    <span class="c">#     with self.assertRaises(Exception) as context:</span>
    <span class="c">#         res = self.api.search(&#39;task&#39;, {&#39;namea&#39;: &#39;cra&#39;, &#39;name_Mod&#39;: &#39;cicontains&#39;}, [&#39;name&#39;])</span>





            <span class="c">########  BEGIN UNIT TESTS ###########</span>

<div class="viewcode-block" id="TestWorkfront.test_login"><a class="viewcode-back" href="../../tests.html#tests.test_api.TestWorkfront.test_login">[docs]</a>    <span class="k">def</span> <span class="nf">test_login</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="c"># Test with a password</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">api</span><span class="o">.</span><span class="n">_request</span> <span class="o">=</span> <span class="k">lambda</span> <span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">,</span> <span class="n">z</span><span class="p">:</span> <span class="p">{</span><span class="s">&#39;sessionID&#39;</span><span class="p">:</span> <span class="s">&#39;test&#39;</span><span class="p">,</span>
                                             <span class="s">&#39;userID&#39;</span><span class="p">:</span> <span class="s">&#39;craig@test.com&#39;</span><span class="p">,</span>
                                             <span class="s">&#39;output_data&#39;</span><span class="p">:</span> <span class="p">[</span><span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">,</span> <span class="n">z</span><span class="p">]}</span>
        <span class="n">res</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">api</span><span class="o">.</span><span class="n">login</span><span class="p">(</span><span class="s">&#39;craig@test.com&#39;</span><span class="p">,</span> <span class="s">&#39;abc123&#39;</span><span class="p">)</span>
        <span class="n">golden</span> <span class="o">=</span> <span class="p">{</span><span class="s">&#39;output_data&#39;</span><span class="p">:</span> <span class="p">[</span><span class="s">&#39;/login&#39;</span><span class="p">,</span> <span class="p">{</span><span class="s">&#39;username&#39;</span><span class="p">:</span> <span class="s">&#39;craig@test.com&#39;</span><span class="p">,</span> <span class="s">&#39;password&#39;</span><span class="p">:</span> <span class="s">&#39;abc123&#39;</span><span class="p">},</span> <span class="s">&#39;POST&#39;</span><span class="p">],</span>
                  <span class="s">&#39;userID&#39;</span><span class="p">:</span> <span class="s">&#39;craig@test.com&#39;</span><span class="p">,</span> <span class="s">&#39;sessionID&#39;</span><span class="p">:</span> <span class="s">&#39;test&#39;</span><span class="p">}</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">res</span><span class="p">,</span> <span class="n">golden</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">api</span><span class="o">.</span><span class="n">session_id</span><span class="p">,</span> <span class="s">&#39;test&#39;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">api</span><span class="o">.</span><span class="n">user_id</span><span class="p">,</span> <span class="s">&#39;craig@test.com&#39;</span><span class="p">)</span>
        <span class="c"># Test without a password</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">api</span><span class="o">.</span><span class="n">_request</span> <span class="o">=</span> <span class="k">lambda</span> <span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">,</span> <span class="n">z</span><span class="p">:</span> <span class="p">{</span><span class="s">&#39;sessionID&#39;</span><span class="p">:</span> <span class="s">&#39;test&#39;</span><span class="p">,</span>
                                             <span class="s">&#39;userID&#39;</span><span class="p">:</span> <span class="n">y</span><span class="p">,</span>
                                             <span class="s">&#39;output_data&#39;</span><span class="p">:</span> <span class="p">[</span><span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">,</span> <span class="n">z</span><span class="p">]}</span>
        <span class="n">res</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">api</span><span class="o">.</span><span class="n">login</span><span class="p">(</span><span class="s">&#39;craig@test.com&#39;</span><span class="p">)</span>
        <span class="n">golden</span> <span class="o">=</span> <span class="p">{</span><span class="s">&#39;output_data&#39;</span><span class="p">:</span> <span class="p">[</span><span class="s">&#39;/login&#39;</span><span class="p">,</span> <span class="p">{</span><span class="s">&#39;username&#39;</span><span class="p">:</span> <span class="s">&#39;craig@test.com&#39;</span><span class="p">},</span> <span class="s">&#39;POST&#39;</span><span class="p">],</span> <span class="s">&#39;sessionID&#39;</span><span class="p">:</span> <span class="s">&#39;test&#39;</span><span class="p">,</span>
                  <span class="s">&#39;userID&#39;</span><span class="p">:</span> <span class="p">{</span><span class="s">&#39;username&#39;</span><span class="p">:</span> <span class="s">&#39;craig@test.com&#39;</span><span class="p">}}</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">res</span><span class="p">,</span> <span class="n">golden</span><span class="p">)</span></div>

<div class="viewcode-block" id="TestWorkfront.test_logout"><a class="viewcode-back" href="../../tests.html#tests.test_api.TestWorkfront.test_logout">[docs]</a>    <span class="k">def</span> <span class="nf">test_logout</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">api</span><span class="o">.</span><span class="n">_request</span> <span class="o">=</span> <span class="k">lambda</span> <span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">,</span> <span class="n">z</span><span class="p">:</span> <span class="p">{</span><span class="s">&#39;output_data&#39;</span><span class="p">:</span> <span class="p">[</span><span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">,</span> <span class="n">z</span><span class="p">]}</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">api</span><span class="o">.</span><span class="n">logout</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">api</span><span class="o">.</span><span class="n">session_id</span><span class="p">,</span> <span class="k">None</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">api</span><span class="o">.</span><span class="n">user_id</span><span class="p">,</span> <span class="k">None</span><span class="p">)</span></div>

<div class="viewcode-block" id="TestWorkfront.test_get_list"><a class="viewcode-back" href="../../tests.html#tests.test_api.TestWorkfront.test_get_list">[docs]</a>    <span class="k">def</span> <span class="nf">test_get_list</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">api</span><span class="o">.</span><span class="n">_request</span> <span class="o">=</span> <span class="k">lambda</span> <span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">,</span> <span class="n">z</span><span class="p">,</span> <span class="n">a</span><span class="p">:</span> <span class="p">{</span><span class="s">&#39;output_data&#39;</span><span class="p">:</span> <span class="p">[</span><span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">,</span> <span class="n">z</span><span class="p">,</span> <span class="n">a</span><span class="p">]}</span>
        <span class="n">res</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">api</span><span class="o">.</span><span class="n">get_list</span><span class="p">(</span><span class="s">&#39;task&#39;</span><span class="p">,</span> <span class="p">[</span><span class="s">&#39;1&#39;</span><span class="p">,</span> <span class="s">&#39;2&#39;</span><span class="p">,</span> <span class="s">&#39;3&#39;</span><span class="p">,</span> <span class="s">&#39;4&#39;</span><span class="p">],</span> <span class="p">[</span><span class="s">&#39;test&#39;</span><span class="p">,</span> <span class="s">&#39;test2&#39;</span><span class="p">])</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">res</span><span class="p">,</span> <span class="p">{</span><span class="s">&#39;output_data&#39;</span><span class="p">:</span> <span class="p">[</span><span class="s">&#39;/task&#39;</span><span class="p">,</span> <span class="p">{</span><span class="s">&#39;id&#39;</span><span class="p">:</span> <span class="s">&#39;1,2,3,4&#39;</span><span class="p">},</span> <span class="s">&#39;GET&#39;</span><span class="p">,</span> <span class="p">[</span><span class="s">&#39;test&#39;</span><span class="p">,</span> <span class="s">&#39;test2&#39;</span><span class="p">]]})</span></div>

<div class="viewcode-block" id="TestWorkfront.test_put"><a class="viewcode-back" href="../../tests.html#tests.test_api.TestWorkfront.test_put">[docs]</a>    <span class="k">def</span> <span class="nf">test_put</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="c"># With fields</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">api</span><span class="o">.</span><span class="n">_request</span> <span class="o">=</span> <span class="k">lambda</span> <span class="n">w</span><span class="p">,</span> <span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">,</span> <span class="n">z</span><span class="p">:</span> <span class="p">{</span><span class="s">&#39;output_data&#39;</span><span class="p">:</span> <span class="p">[</span><span class="n">w</span><span class="p">,</span> <span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">,</span> <span class="n">z</span><span class="p">]}</span>
        <span class="n">res</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">api</span><span class="o">.</span><span class="n">put</span><span class="p">(</span><span class="s">&#39;task&#39;</span><span class="p">,</span> <span class="s">&#39;ABC123&#39;</span><span class="p">,</span> <span class="p">{</span><span class="s">&#39;a&#39;</span><span class="p">:</span> <span class="s">&#39;b&#39;</span><span class="p">,</span> <span class="s">&#39;c&#39;</span><span class="p">:</span> <span class="s">&#39;d&#39;</span><span class="p">},</span> <span class="p">[</span><span class="s">&#39;test&#39;</span><span class="p">,</span> <span class="s">&#39;test2&#39;</span><span class="p">])</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertIsInstance</span><span class="p">(</span><span class="n">res</span><span class="p">[</span><span class="s">&#39;output_data&#39;</span><span class="p">],</span> <span class="nb">list</span><span class="p">)</span>

        <span class="c"># Without fields</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">api</span><span class="o">.</span><span class="n">_request</span> <span class="o">=</span> <span class="k">lambda</span> <span class="n">w</span><span class="p">,</span> <span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">,</span> <span class="n">z</span><span class="p">:</span> <span class="p">{</span><span class="s">&#39;output_data&#39;</span><span class="p">:</span> <span class="p">[</span><span class="n">w</span><span class="p">,</span> <span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">,</span> <span class="n">z</span><span class="p">]}</span>
        <span class="n">res</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">api</span><span class="o">.</span><span class="n">put</span><span class="p">(</span><span class="s">&#39;task&#39;</span><span class="p">,</span> <span class="s">&#39;ABC123&#39;</span><span class="p">,</span> <span class="p">{</span><span class="s">&#39;a&#39;</span><span class="p">:</span> <span class="s">&#39;b&#39;</span><span class="p">,</span> <span class="s">&#39;c&#39;</span><span class="p">:</span> <span class="s">&#39;d&#39;</span><span class="p">})</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertIsInstance</span><span class="p">(</span><span class="n">res</span><span class="p">[</span><span class="s">&#39;output_data&#39;</span><span class="p">],</span> <span class="nb">list</span><span class="p">)</span></div>

<div class="viewcode-block" id="TestWorkfront.test_action"><a class="viewcode-back" href="../../tests.html#tests.test_api.TestWorkfront.test_action">[docs]</a>    <span class="k">def</span> <span class="nf">test_action</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="c"># Without obj ID</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">api</span><span class="o">.</span><span class="n">_request</span> <span class="o">=</span> <span class="k">lambda</span> <span class="n">w</span><span class="p">,</span> <span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">,</span> <span class="n">z</span><span class="p">:</span> <span class="p">{</span><span class="s">&#39;output_data&#39;</span><span class="p">:</span> <span class="p">[</span><span class="n">w</span><span class="p">,</span> <span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">,</span> <span class="n">z</span><span class="p">]}</span>
        <span class="n">res</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">api</span><span class="o">.</span><span class="n">action</span><span class="p">(</span><span class="s">&#39;task&#39;</span><span class="p">,</span> <span class="s">&#39;doSomething&#39;</span><span class="p">,</span> <span class="p">{</span><span class="s">&#39;a&#39;</span><span class="p">:</span> <span class="s">&#39;b&#39;</span><span class="p">,</span> <span class="s">&#39;c&#39;</span><span class="p">:</span> <span class="s">&#39;d&#39;</span><span class="p">},</span> <span class="p">[</span><span class="s">&#39;test&#39;</span><span class="p">,</span> <span class="s">&#39;test2&#39;</span><span class="p">])</span>
        <span class="c"># self.assertEqual(res, {&#39;output_data&#39;: [&#39;/task&#39;, {&#39;action&#39;: &#39;doSomething&#39;, &#39;a&#39;: &#39;b&#39;, &#39;c&#39;: &#39;d&#39;}, &#39;PUT&#39;, [&#39;test&#39;, &#39;test2&#39;]]})</span>

        <span class="c"># With Obj ID</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">api</span><span class="o">.</span><span class="n">_request</span> <span class="o">=</span> <span class="k">lambda</span> <span class="n">w</span><span class="p">,</span> <span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">,</span> <span class="n">z</span><span class="p">:</span> <span class="p">{</span><span class="s">&#39;output_data&#39;</span><span class="p">:</span> <span class="p">[</span><span class="n">w</span><span class="p">,</span> <span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">,</span> <span class="n">z</span><span class="p">]}</span>
        <span class="n">res</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">api</span><span class="o">.</span><span class="n">action</span><span class="p">(</span><span class="s">&#39;task&#39;</span><span class="p">,</span> <span class="s">&#39;doSomething&#39;</span><span class="p">,</span> <span class="p">{</span><span class="s">&#39;a&#39;</span><span class="p">:</span> <span class="s">&#39;b&#39;</span><span class="p">,</span> <span class="s">&#39;c&#39;</span><span class="p">:</span> <span class="s">&#39;d&#39;</span><span class="p">},</span> <span class="p">[</span><span class="s">&#39;test&#39;</span><span class="p">,</span> <span class="s">&#39;test2&#39;</span><span class="p">],</span> <span class="s">&#39;obj_id&#39;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">res</span><span class="p">,</span> <span class="p">{</span>
            <span class="s">&#39;output_data&#39;</span><span class="p">:</span> <span class="p">[</span><span class="s">&#39;/task/obj_id&#39;</span><span class="p">,</span> <span class="p">{</span><span class="s">&#39;action&#39;</span><span class="p">:</span> <span class="s">&#39;doSomething&#39;</span><span class="p">,</span> <span class="s">&#39;a&#39;</span><span class="p">:</span> <span class="s">&#39;b&#39;</span><span class="p">,</span> <span class="s">&#39;c&#39;</span><span class="p">:</span> <span class="s">&#39;d&#39;</span><span class="p">},</span> <span class="s">&#39;PUT&#39;</span><span class="p">,</span> <span class="p">[</span><span class="s">&#39;test&#39;</span><span class="p">,</span> <span class="s">&#39;test2&#39;</span><span class="p">]]})</span></div>

<div class="viewcode-block" id="TestWorkfront.test__bulksegmenter"><a class="viewcode-back" href="../../tests.html#tests.test_api.TestWorkfront.test__bulksegmenter">[docs]</a>    <span class="k">def</span> <span class="nf">test__bulksegmenter</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="c"># Check bulk and bulk_create. These have an &#39;updates&#39; key.</span>
        <span class="c"># Check less than 100 items</span>
        <span class="n">parameters</span> <span class="o">=</span> <span class="p">[{</span><span class="s">&#39;ID&#39;</span><span class="p">:</span> <span class="s">&#39;abc&#39;</span><span class="p">,</span> <span class="s">&#39;name&#39;</span><span class="p">:</span> <span class="s">&#39;Change me&#39;</span><span class="p">},</span> <span class="p">{</span><span class="s">&#39;ID&#39;</span><span class="p">:</span> <span class="s">&#39;def&#39;</span><span class="p">,</span> <span class="s">&#39;name&#39;</span><span class="p">:</span> <span class="s">&#39;Change me&#39;</span><span class="p">}]</span>
        <span class="n">bulk_method</span> <span class="o">=</span> <span class="k">lambda</span> <span class="n">updates</span><span class="p">:</span> <span class="n">updates</span>
        <span class="n">golden</span> <span class="o">=</span> <span class="p">[{</span><span class="s">&#39;ID&#39;</span><span class="p">:</span> <span class="s">&#39;abc&#39;</span><span class="p">,</span> <span class="s">&#39;name&#39;</span><span class="p">:</span> <span class="s">&#39;Change me&#39;</span><span class="p">},</span> <span class="p">{</span><span class="s">&#39;ID&#39;</span><span class="p">:</span> <span class="s">&#39;def&#39;</span><span class="p">,</span> <span class="s">&#39;name&#39;</span><span class="p">:</span> <span class="s">&#39;Change me&#39;</span><span class="p">}]</span>
        <span class="n">res</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">api</span><span class="o">.</span><span class="n">_bulk_segmenter</span><span class="p">(</span><span class="n">bulk_method</span><span class="p">,</span> <span class="n">updates</span><span class="o">=</span><span class="n">parameters</span><span class="p">,</span> <span class="n">objs_per_loop</span><span class="o">=</span><span class="mi">6</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">golden</span><span class="p">,</span> <span class="n">res</span><span class="p">)</span>

        <span class="n">test_list</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="n">bulk_method</span> <span class="o">=</span> <span class="k">lambda</span> <span class="n">updates</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">hash_dict</span><span class="p">(</span><span class="n">updates</span><span class="p">,</span> <span class="k">True</span><span class="p">)</span>
        <span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">316</span><span class="p">):</span>
            <span class="n">test_list</span><span class="o">.</span><span class="n">append</span><span class="p">({</span><span class="s">&#39;ID&#39;</span><span class="p">:</span> <span class="nb">str</span><span class="p">(</span><span class="n">x</span> <span class="o">*</span> <span class="mi">5</span><span class="p">),</span> <span class="s">&#39;name&#39;</span><span class="p">:</span> <span class="s">&#39;blarg&#39;</span><span class="p">})</span>
        <span class="n">res</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">api</span><span class="o">.</span><span class="n">_bulk_segmenter</span><span class="p">(</span><span class="n">bulk_method</span><span class="p">,</span> <span class="n">updates</span><span class="o">=</span><span class="n">test_list</span><span class="p">,</span> <span class="n">objs_per_loop</span><span class="o">=</span><span class="mi">5</span><span class="p">)</span>
        <span class="n">golden</span> <span class="o">=</span> <span class="p">[</span><span class="s">&#39;d4da02f8bbc63a4bfdfdad5e4766f5a6d4df5e64&#39;</span><span class="p">,</span> <span class="s">&#39;b1e5d798e124c498b93806965dec8d5bdf864f2e&#39;</span><span class="p">,</span> <span class="s">&#39;f208050cffbd096fd6007cb65b2ddbde089e26a2&#39;</span><span class="p">,</span> <span class="s">&#39;3e55a10fb7fac9d3070573c29a7bbb8877da908b&#39;</span><span class="p">,</span> <span class="s">&#39;59d3d8ed5598effe28c8c58e447d447c686447b6&#39;</span><span class="p">,</span> <span class="s">&#39;ef87bbca29e1800f83f77cd31b7c394476dfef7c&#39;</span><span class="p">,</span> <span class="s">&#39;a5f3f4c0d0972371d0ecfced687fcaec3e7df9c4&#39;</span><span class="p">,</span> <span class="s">&#39;542c263190bd170548455f422c185662f9de9a3b&#39;</span><span class="p">,</span> <span class="s">&#39;8f18822216690b0b53209c831fc09f2df75172a2&#39;</span><span class="p">,</span> <span class="s">&#39;061eef2ee159440a45948f71b8d119e724cbb39b&#39;</span><span class="p">,</span> <span class="s">&#39;18c9a6d440d936e2da1a703bc28b363345f73d29&#39;</span><span class="p">,</span> <span class="s">&#39;4afcd003a69b8e16b742111a3b7f48caa0093d9f&#39;</span><span class="p">,</span> <span class="s">&#39;ad889a553efdc9d12bacbd9cdfac8ce6195ef4e3&#39;</span><span class="p">,</span> <span class="s">&#39;32bcf872ea4d7b53fe29f5253135d364a5a32c12&#39;</span><span class="p">,</span> <span class="s">&#39;43e851739083280e1d605c6b49fa578c2681d5e6&#39;</span><span class="p">,</span> <span class="s">&#39;165806f65e1f47da53783d479c64380366edde67&#39;</span><span class="p">,</span> <span class="s">&#39;72d8af330b71cc0e8a9d720a314a5430de9a198f&#39;</span><span class="p">,</span> <span class="s">&#39;a3b69771c0b32ff45174602a0b9b2c04d8f4de81&#39;</span><span class="p">,</span> <span class="s">&#39;ab1dc2f16765365af7758041f7aede08e66eec79&#39;</span><span class="p">,</span> <span class="s">&#39;73f321e3c9e8cba646db693d8e92ad656362840f&#39;</span><span class="p">,</span> <span class="s">&#39;d57eb94fe0c9610092852eaffd9d846819f4ff96&#39;</span><span class="p">,</span> <span class="s">&#39;834800f41ccda4cd860cafa8ada6d5ea3becf3f2&#39;</span><span class="p">,</span> <span class="s">&#39;88caad9365d90f7d1774cd02b7a4c37a497c9e07&#39;</span><span class="p">,</span> <span class="s">&#39;681832fb6faa3740bde7d80e560c3bb464462cf3&#39;</span><span class="p">,</span> <span class="s">&#39;bbbae94974bfc90e08bc31f903a06fda387f5f67&#39;</span><span class="p">,</span> <span class="s">&#39;cbeb91b7f7e1f20e6476c54aba635a00c64b1592&#39;</span><span class="p">,</span> <span class="s">&#39;51f82d87a449d76fee9abbb4e76cca344a5081cc&#39;</span><span class="p">,</span> <span class="s">&#39;c71c756a9fd3fa948602c592634f6c91da85cf97&#39;</span><span class="p">,</span> <span class="s">&#39;69835a8ab76249798d80bedddde4a5139fd8b623&#39;</span><span class="p">,</span> <span class="s">&#39;3c04c981c5abcb3bf44bafa8d220d09ac2b77e71&#39;</span><span class="p">,</span> <span class="s">&#39;72ff546fdccf562100de0c405da350023465e964&#39;</span><span class="p">,</span> <span class="s">&#39;8528338b664b58328d7f4752233764914d7ab282&#39;</span><span class="p">,</span> <span class="s">&#39;1336e9711597440749a7fa8f9702f6355d1605a2&#39;</span><span class="p">,</span> <span class="s">&#39;364139384f674f0bd01df58378d9c56970cca09f&#39;</span><span class="p">,</span> <span class="s">&#39;711f49c529016015f8f217ac84e53f9c6314c775&#39;</span><span class="p">,</span> <span class="s">&#39;327355a7d9cc766b0c01cad1b5a93b611f0fb4bb&#39;</span><span class="p">,</span> <span class="s">&#39;d945f91626e14257cb5f6056259c96c3724fd5cc&#39;</span><span class="p">,</span> <span class="s">&#39;d5b53f60092cdc4b3c5e482d8af4f16e707570ee&#39;</span><span class="p">,</span> <span class="s">&#39;17fe0a43c5d5a116224ac9fc91a28764b2ba03c6&#39;</span><span class="p">,</span> <span class="s">&#39;f89c14eeb4a2115ce2c490a6e142f939fb44b178&#39;</span><span class="p">,</span> <span class="s">&#39;4ead2cab5b087ba12cd3f03bdb9f30938bb225d7&#39;</span><span class="p">,</span> <span class="s">&#39;9a4cde024b3a2ad67b4ac7228586e33eb9be35da&#39;</span><span class="p">,</span> <span class="s">&#39;9b640d2cf399c76f19382fe3b39b15f332b67f2b&#39;</span><span class="p">,</span> <span class="s">&#39;8e184a93eee6e5d2ac8af0d08b0fa20922b308a1&#39;</span><span class="p">,</span> <span class="s">&#39;46d66820761b202ad10c89fb628aaf94b6a3c6c0&#39;</span><span class="p">,</span> <span class="s">&#39;6a14e93c50ad4cf6901c6e3408b6356e75c594ee&#39;</span><span class="p">,</span> <span class="s">&#39;b145b7ac63be465fdaeaae4d03d2ce83d2087223&#39;</span><span class="p">,</span> <span class="s">&#39;67f24ff886e5b43eef1b967094f1c6c57ed4c897&#39;</span><span class="p">,</span> <span class="s">&#39;710f7a381fac90f74bf28351c55ce03edec240c6&#39;</span><span class="p">,</span> <span class="s">&#39;0ef3585bbcb046ee770793f7a980f385ed84149b&#39;</span><span class="p">,</span> <span class="s">&#39;83ad51f4548e52baa892ee64a61eddf4bc2e217b&#39;</span><span class="p">,</span> <span class="s">&#39;370ca6fd927e7a5b030ca3208b09663a1ba69c20&#39;</span><span class="p">,</span> <span class="s">&#39;0c37ac5fbcb2c0f051bd4dcd1615715fc1eaae47&#39;</span><span class="p">,</span> <span class="s">&#39;a2643521bf057931d4318c72103b2bb39714b25e&#39;</span><span class="p">,</span> <span class="s">&#39;08d6f178330b395ec364ed956f5825903ed12982&#39;</span><span class="p">,</span> <span class="s">&#39;7361f022e6270818e8e4ed8a5be3a9a511624bf0&#39;</span><span class="p">,</span> <span class="s">&#39;26406b6bdb394e189672ad4168be732cb797cff4&#39;</span><span class="p">,</span> <span class="s">&#39;4d3011a1becb7c7c61471b08072a11e046f53012&#39;</span><span class="p">,</span> <span class="s">&#39;de8ccc540533f803808eeea072e5e87495aec86d&#39;</span><span class="p">,</span> <span class="s">&#39;434edce24c99785658526588a894603dfb9f9393&#39;</span><span class="p">,</span> <span class="s">&#39;755e99dcfe367e9831148fd650fef5b464b3c5a1&#39;</span><span class="p">,</span> <span class="s">&#39;f304d4e68da83ed63330b8f176457f37e60f6e25&#39;</span><span class="p">,</span> <span class="s">&#39;f8635a249e32ad9d605599983d2ac7db6ab17c56&#39;</span><span class="p">,</span> <span class="s">&#39;9a97f647347765abcdfdb4c6fc098285625a7023&#39;</span><span class="p">]</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">assertCountEqual</span><span class="p">(</span><span class="n">res</span><span class="p">,</span> <span class="n">golden</span><span class="p">)</span>

        <span class="n">parameters</span> <span class="o">=</span> <span class="p">[{</span><span class="s">&#39;ID&#39;</span><span class="p">:</span> <span class="s">&#39;abc&#39;</span><span class="p">,</span> <span class="s">&#39;name&#39;</span><span class="p">:</span> <span class="s">&#39;Change me&#39;</span><span class="p">},</span> <span class="p">{</span><span class="s">&#39;ID&#39;</span><span class="p">:</span> <span class="s">&#39;def&#39;</span><span class="p">,</span> <span class="s">&#39;name&#39;</span><span class="p">:</span> <span class="s">&#39;Change me&#39;</span><span class="p">}]</span>
        <span class="n">bulk_method</span> <span class="o">=</span> <span class="k">lambda</span> <span class="n">updates</span><span class="p">:</span> <span class="n">updates</span>
        <span class="n">golden</span> <span class="o">=</span> <span class="p">[{</span><span class="s">&#39;ID&#39;</span><span class="p">:</span> <span class="s">&#39;abc&#39;</span><span class="p">,</span> <span class="s">&#39;name&#39;</span><span class="p">:</span> <span class="s">&#39;Change me&#39;</span><span class="p">},</span> <span class="p">{</span><span class="s">&#39;ID&#39;</span><span class="p">:</span> <span class="s">&#39;def&#39;</span><span class="p">,</span> <span class="s">&#39;name&#39;</span><span class="p">:</span> <span class="s">&#39;Change me&#39;</span><span class="p">}]</span>
        <span class="n">res</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">api</span><span class="o">.</span><span class="n">_bulk_segmenter</span><span class="p">(</span><span class="n">bulk_method</span><span class="p">,</span> <span class="n">updates</span><span class="o">=</span><span class="n">parameters</span><span class="p">,</span> <span class="n">objs_per_loop</span><span class="o">=</span><span class="mi">5</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertCountEqual</span><span class="p">(</span><span class="n">golden</span><span class="p">,</span> <span class="n">res</span><span class="p">)</span>

        <span class="n">test_list</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="n">bulk_method</span> <span class="o">=</span> <span class="k">lambda</span> <span class="n">obj_ids</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">hash_dict</span><span class="p">(</span><span class="n">obj_ids</span><span class="p">,</span> <span class="k">True</span><span class="p">)</span>
        <span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">316</span><span class="p">):</span>
            <span class="n">test_list</span><span class="o">.</span><span class="n">append</span><span class="p">({</span><span class="s">&#39;ID&#39;</span><span class="p">:</span> <span class="nb">str</span><span class="p">(</span><span class="n">x</span> <span class="o">*</span> <span class="mi">5</span><span class="p">),</span> <span class="s">&#39;name&#39;</span><span class="p">:</span> <span class="s">&#39;blarg&#39;</span><span class="p">})</span>
        <span class="n">res</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">api</span><span class="o">.</span><span class="n">_bulk_segmenter</span><span class="p">(</span><span class="n">bulk_method</span><span class="p">,</span> <span class="n">obj_ids</span><span class="o">=</span><span class="n">test_list</span><span class="p">,</span> <span class="n">objs_per_loop</span><span class="o">=</span><span class="mi">100</span><span class="p">)</span>
        <span class="n">golden</span> <span class="o">=</span> <span class="p">[</span><span class="s">&#39;6c4d278c1c1d0c12675c6e2a4fe0c71fbcd41dc7&#39;</span><span class="p">,</span> <span class="s">&#39;d15ca064a3541f295c6cd6ca4626e388b164a3ef&#39;</span><span class="p">,</span>
                  <span class="s">&#39;a19776674a17917ea8799e3c489a9c629709ee14&#39;</span><span class="p">,</span> <span class="s">&#39;df6ec7bdfa83ec8ff867a60e3fc46533a04dfec5&#39;</span><span class="p">]</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertCountEqual</span><span class="p">(</span><span class="n">res</span><span class="p">,</span> <span class="n">golden</span><span class="p">)</span></div>

<div class="viewcode-block" id="TestWorkfront.test_bulk"><a class="viewcode-back" href="../../tests.html#tests.test_api.TestWorkfront.test_bulk">[docs]</a>    <span class="k">def</span> <span class="nf">test_bulk</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">updates</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">316</span><span class="p">):</span>
            <span class="n">updates</span><span class="o">.</span><span class="n">append</span><span class="p">({</span><span class="s">&#39;ID&#39;</span><span class="p">:</span> <span class="nb">str</span><span class="p">(</span><span class="n">x</span> <span class="o">*</span> <span class="mi">5</span><span class="p">),</span> <span class="s">&#39;name&#39;</span><span class="p">:</span> <span class="s">&#39;blarg&#39;</span><span class="p">})</span>
        <span class="c"># With fields</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">api</span><span class="o">.</span><span class="n">_request</span> <span class="o">=</span> <span class="k">lambda</span> <span class="n">path</span><span class="p">,</span> <span class="n">objcode</span><span class="p">,</span> <span class="n">updates</span><span class="p">,</span> <span class="n">fields</span><span class="p">:</span> <span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">hash_dict</span><span class="p">(</span><span class="n">updates</span><span class="p">)]</span>
        <span class="n">res</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">api</span><span class="o">.</span><span class="n">bulk</span><span class="p">(</span><span class="s">&#39;task&#39;</span><span class="p">,</span> <span class="n">updates</span><span class="p">,</span> <span class="p">[</span><span class="s">&#39;a&#39;</span><span class="p">,</span> <span class="s">&#39;b&#39;</span><span class="p">])</span>
        <span class="n">golden</span> <span class="o">=</span> <span class="p">[</span><span class="s">&#39;f9a286972b357196d92e8f239303f794fee6167a&#39;</span><span class="p">,</span> <span class="s">&#39;f9a286972b357196d92e8f239303f794fee6167a&#39;</span><span class="p">,</span>
                  <span class="s">&#39;f9a286972b357196d92e8f239303f794fee6167a&#39;</span><span class="p">,</span> <span class="s">&#39;f9a286972b357196d92e8f239303f794fee6167a&#39;</span><span class="p">]</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">res</span><span class="p">,</span> <span class="n">golden</span><span class="p">)</span>
        <span class="c"># Check the path</span>
        <span class="n">updates</span> <span class="o">=</span> <span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">]</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">api</span><span class="o">.</span><span class="n">_request</span> <span class="o">=</span> <span class="k">lambda</span> <span class="n">path</span><span class="p">,</span> <span class="n">objcode</span><span class="p">,</span> <span class="n">updates</span><span class="p">,</span> <span class="n">fields</span><span class="p">:</span> <span class="n">path</span>
        <span class="n">res</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">api</span><span class="o">.</span><span class="n">bulk</span><span class="p">(</span><span class="s">&#39;task&#39;</span><span class="p">,</span> <span class="n">updates</span><span class="p">,</span> <span class="p">[</span><span class="s">&#39;a&#39;</span><span class="p">,</span> <span class="s">&#39;b&#39;</span><span class="p">])</span>
        <span class="n">path</span> <span class="o">=</span> <span class="s">&quot;/task&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">res</span><span class="p">,</span> <span class="n">path</span><span class="p">)</span>

        <span class="n">updates</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">82</span><span class="p">):</span>
            <span class="n">updates</span><span class="o">.</span><span class="n">append</span><span class="p">({</span><span class="s">&#39;ID&#39;</span><span class="p">:</span> <span class="nb">str</span><span class="p">(</span><span class="n">x</span> <span class="o">*</span> <span class="mi">5</span><span class="p">),</span> <span class="s">&#39;name&#39;</span><span class="p">:</span> <span class="s">&#39;blarg&#39;</span><span class="p">})</span>
        <span class="c"># With fields</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">api</span><span class="o">.</span><span class="n">_request</span> <span class="o">=</span> <span class="k">lambda</span> <span class="n">x</span><span class="p">,</span> <span class="n">objcode</span><span class="p">,</span> <span class="n">updates</span><span class="p">,</span> <span class="n">fields</span><span class="p">:</span> <span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">hash_dict</span><span class="p">(</span><span class="n">updates</span><span class="p">)]</span>
        <span class="n">res</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">api</span><span class="o">.</span><span class="n">bulk</span><span class="p">(</span><span class="s">&#39;task&#39;</span><span class="p">,</span> <span class="n">updates</span><span class="p">,</span> <span class="p">[</span><span class="s">&#39;a&#39;</span><span class="p">,</span> <span class="s">&#39;b&#39;</span><span class="p">])</span>
        <span class="n">golden</span> <span class="o">=</span> <span class="p">[</span><span class="s">&#39;f9a286972b357196d92e8f239303f794fee6167a&#39;</span><span class="p">]</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">res</span><span class="p">,</span> <span class="n">golden</span><span class="p">)</span></div>

<div class="viewcode-block" id="TestWorkfront.test_bulk_create"><a class="viewcode-back" href="../../tests.html#tests.test_api.TestWorkfront.test_bulk_create">[docs]</a>    <span class="k">def</span> <span class="nf">test_bulk_create</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">updates</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">316</span><span class="p">):</span>
            <span class="n">updates</span><span class="o">.</span><span class="n">append</span><span class="p">({</span><span class="s">&#39;ID&#39;</span><span class="p">:</span> <span class="nb">str</span><span class="p">(</span><span class="n">x</span> <span class="o">*</span> <span class="mi">5</span><span class="p">),</span> <span class="s">&#39;name&#39;</span><span class="p">:</span> <span class="s">&#39;blarg&#39;</span><span class="p">})</span>
        <span class="c"># With fields</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">api</span><span class="o">.</span><span class="n">_request</span> <span class="o">=</span> <span class="k">lambda</span> <span class="n">x</span><span class="p">,</span> <span class="n">objcode</span><span class="p">,</span> <span class="n">updates</span><span class="p">,</span> <span class="n">fields</span><span class="p">:</span> <span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">hash_dict</span><span class="p">(</span><span class="n">updates</span><span class="p">)]</span>
        <span class="n">res</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">api</span><span class="o">.</span><span class="n">bulk_create</span><span class="p">(</span><span class="s">&#39;task&#39;</span><span class="p">,</span> <span class="n">updates</span><span class="p">,</span> <span class="p">[</span><span class="s">&#39;a&#39;</span><span class="p">,</span> <span class="s">&#39;b&#39;</span><span class="p">])</span>
        <span class="n">golden</span> <span class="o">=</span> <span class="p">[</span><span class="s">&#39;3e93a477bcf2f542c3efe96111eb92cd57f75fb3&#39;</span><span class="p">,</span> <span class="s">&#39;3e93a477bcf2f542c3efe96111eb92cd57f75fb3&#39;</span><span class="p">,</span>
                  <span class="s">&#39;3e93a477bcf2f542c3efe96111eb92cd57f75fb3&#39;</span><span class="p">,</span> <span class="s">&#39;3e93a477bcf2f542c3efe96111eb92cd57f75fb3&#39;</span><span class="p">]</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">res</span><span class="p">,</span> <span class="n">golden</span><span class="p">)</span>

        <span class="c"># Check the path</span>
        <span class="n">updates</span> <span class="o">=</span> <span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">]</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">api</span><span class="o">.</span><span class="n">_request</span> <span class="o">=</span> <span class="k">lambda</span> <span class="n">path</span><span class="p">,</span> <span class="n">objcode</span><span class="p">,</span> <span class="n">updates</span><span class="p">,</span> <span class="n">fields</span><span class="p">:</span> <span class="n">path</span>
        <span class="n">res</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">api</span><span class="o">.</span><span class="n">bulk_create</span><span class="p">(</span><span class="s">&#39;task&#39;</span><span class="p">,</span> <span class="n">updates</span><span class="p">,</span> <span class="p">[</span><span class="s">&#39;a&#39;</span><span class="p">,</span> <span class="s">&#39;b&#39;</span><span class="p">])</span>
        <span class="n">path</span> <span class="o">=</span> <span class="s">&quot;/task&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">res</span><span class="p">,</span> <span class="n">path</span><span class="p">)</span>

        <span class="n">updates</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">82</span><span class="p">):</span>
            <span class="n">updates</span><span class="o">.</span><span class="n">append</span><span class="p">({</span><span class="s">&#39;ID&#39;</span><span class="p">:</span> <span class="nb">str</span><span class="p">(</span><span class="n">x</span> <span class="o">*</span> <span class="mi">5</span><span class="p">),</span> <span class="s">&#39;name&#39;</span><span class="p">:</span> <span class="s">&#39;blarg&#39;</span><span class="p">})</span>
        <span class="c"># With fields</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">api</span><span class="o">.</span><span class="n">_request</span> <span class="o">=</span> <span class="k">lambda</span> <span class="n">x</span><span class="p">,</span> <span class="n">objcode</span><span class="p">,</span> <span class="n">updates</span><span class="p">,</span> <span class="n">fields</span><span class="p">:</span> <span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">hash_dict</span><span class="p">(</span><span class="n">updates</span><span class="p">)]</span>
        <span class="n">res</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">api</span><span class="o">.</span><span class="n">bulk_create</span><span class="p">(</span><span class="s">&#39;task&#39;</span><span class="p">,</span> <span class="n">updates</span><span class="p">,</span> <span class="p">[</span><span class="s">&#39;a&#39;</span><span class="p">,</span> <span class="s">&#39;b&#39;</span><span class="p">])</span>
        <span class="n">golden</span> <span class="o">=</span> <span class="p">[</span><span class="s">&#39;3e93a477bcf2f542c3efe96111eb92cd57f75fb3&#39;</span><span class="p">]</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">res</span><span class="p">,</span> <span class="n">golden</span><span class="p">)</span></div>

<div class="viewcode-block" id="TestWorkfront.test_post"><a class="viewcode-back" href="../../tests.html#tests.test_api.TestWorkfront.test_post">[docs]</a>    <span class="k">def</span> <span class="nf">test_post</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="c"># With fields</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">api</span><span class="o">.</span><span class="n">_request</span> <span class="o">=</span> <span class="k">lambda</span> <span class="n">w</span><span class="p">,</span> <span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">,</span> <span class="n">z</span><span class="p">:</span> <span class="p">{</span><span class="s">&#39;output_data&#39;</span><span class="p">:</span> <span class="p">[</span><span class="n">w</span><span class="p">,</span> <span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">,</span> <span class="n">z</span><span class="p">]}</span>
        <span class="n">golden</span> <span class="o">=</span> <span class="p">{</span><span class="s">&#39;output_data&#39;</span><span class="p">:</span> <span class="p">[</span><span class="s">&#39;/task&#39;</span><span class="p">,</span> <span class="p">{</span><span class="s">&#39;updates&#39;</span><span class="p">:</span> <span class="s">&#39;{&quot;c&quot;: &quot;d&quot;, &quot;a&quot;: &quot;b&quot;}&#39;</span><span class="p">},</span> <span class="s">&#39;POST&#39;</span><span class="p">,</span> <span class="p">[</span><span class="s">&#39;test&#39;</span><span class="p">,</span> <span class="s">&#39;test2&#39;</span><span class="p">]]}</span>
        <span class="n">res</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">api</span><span class="o">.</span><span class="n">post</span><span class="p">(</span><span class="s">&#39;task&#39;</span><span class="p">,</span> <span class="p">{</span><span class="s">&#39;a&#39;</span><span class="p">:</span> <span class="s">&#39;b&#39;</span><span class="p">,</span> <span class="s">&#39;c&#39;</span><span class="p">:</span> <span class="s">&#39;d&#39;</span><span class="p">},</span> <span class="p">[</span><span class="s">&#39;test&#39;</span><span class="p">,</span> <span class="s">&#39;test2&#39;</span><span class="p">])</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertCountEqual</span><span class="p">(</span><span class="n">res</span><span class="p">,</span> <span class="n">golden</span><span class="p">)</span>

        <span class="c"># With fields</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">api</span><span class="o">.</span><span class="n">_request</span> <span class="o">=</span> <span class="k">lambda</span> <span class="n">w</span><span class="p">,</span> <span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">,</span> <span class="n">z</span><span class="p">:</span> <span class="p">{</span><span class="s">&#39;output_data&#39;</span><span class="p">:</span> <span class="p">[</span><span class="n">w</span><span class="p">,</span> <span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">,</span> <span class="n">z</span><span class="p">]}</span>
        <span class="n">golden</span> <span class="o">=</span> <span class="p">{</span><span class="s">&#39;output_data&#39;</span><span class="p">:</span> <span class="p">[</span><span class="s">&#39;/task&#39;</span><span class="p">,</span> <span class="p">{</span><span class="s">&#39;updates&#39;</span><span class="p">:</span> <span class="s">&#39;{&quot;c&quot;: &quot;d&quot;, &quot;a&quot;: &quot;b&quot;}&#39;</span><span class="p">},</span> <span class="s">&#39;POST&#39;</span><span class="p">,</span> <span class="k">None</span><span class="p">]}</span>
        <span class="n">res</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">api</span><span class="o">.</span><span class="n">post</span><span class="p">(</span><span class="s">&#39;task&#39;</span><span class="p">,</span> <span class="p">{</span><span class="s">&#39;a&#39;</span><span class="p">:</span> <span class="s">&#39;b&#39;</span><span class="p">,</span> <span class="s">&#39;c&#39;</span><span class="p">:</span> <span class="s">&#39;d&#39;</span><span class="p">})</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertCountEqual</span><span class="p">(</span><span class="n">res</span><span class="p">,</span> <span class="n">golden</span><span class="p">)</span></div>

<div class="viewcode-block" id="TestWorkfront.test_get"><a class="viewcode-back" href="../../tests.html#tests.test_api.TestWorkfront.test_get">[docs]</a>    <span class="k">def</span> <span class="nf">test_get</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="c"># With fields</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">api</span><span class="o">.</span><span class="n">_request</span> <span class="o">=</span> <span class="k">lambda</span> <span class="n">w</span><span class="p">,</span> <span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">,</span> <span class="n">z</span><span class="p">:</span> <span class="p">{</span><span class="s">&#39;output_data&#39;</span><span class="p">:</span> <span class="p">[</span><span class="n">w</span><span class="p">,</span> <span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">,</span> <span class="n">z</span><span class="p">]}</span>
        <span class="n">golden</span> <span class="o">=</span> <span class="p">{</span><span class="s">&#39;output_data&#39;</span><span class="p">:</span> <span class="p">[</span><span class="s">&#39;/task/abc123&#39;</span><span class="p">,</span> <span class="k">None</span><span class="p">,</span> <span class="s">&#39;GET&#39;</span><span class="p">,</span> <span class="p">[</span><span class="s">&#39;test&#39;</span><span class="p">,</span> <span class="s">&#39;test2&#39;</span><span class="p">]]}</span>
        <span class="n">res</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">api</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s">&#39;task&#39;</span><span class="p">,</span> <span class="s">&#39;abc123&#39;</span><span class="p">,</span> <span class="p">[</span><span class="s">&#39;test&#39;</span><span class="p">,</span> <span class="s">&#39;test2&#39;</span><span class="p">])</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">res</span><span class="p">,</span> <span class="n">golden</span><span class="p">)</span>

        <span class="c"># With fields</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">api</span><span class="o">.</span><span class="n">_request</span> <span class="o">=</span> <span class="k">lambda</span> <span class="n">w</span><span class="p">,</span> <span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">,</span> <span class="n">z</span><span class="p">:</span> <span class="p">{</span><span class="s">&#39;output_data&#39;</span><span class="p">:</span> <span class="p">[</span><span class="n">w</span><span class="p">,</span> <span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">,</span> <span class="n">z</span><span class="p">]}</span>
        <span class="n">golden</span> <span class="o">=</span> <span class="p">{</span><span class="s">&#39;output_data&#39;</span><span class="p">:</span> <span class="p">[</span><span class="s">&#39;/task/abc123&#39;</span><span class="p">,</span> <span class="k">None</span><span class="p">,</span> <span class="s">&#39;GET&#39;</span><span class="p">,</span> <span class="k">None</span><span class="p">]}</span>
        <span class="n">res</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">api</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s">&#39;task&#39;</span><span class="p">,</span> <span class="s">&#39;abc123&#39;</span><span class="p">,</span> <span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">res</span><span class="p">,</span> <span class="n">golden</span><span class="p">)</span></div>

<div class="viewcode-block" id="TestWorkfront.test_delete"><a class="viewcode-back" href="../../tests.html#tests.test_api.TestWorkfront.test_delete">[docs]</a>    <span class="k">def</span> <span class="nf">test_delete</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">api</span><span class="o">.</span><span class="n">_request</span> <span class="o">=</span> <span class="k">lambda</span> <span class="n">w</span><span class="p">,</span> <span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">:</span> <span class="p">{</span><span class="s">&#39;output_data&#39;</span><span class="p">:</span> <span class="p">[</span><span class="n">w</span><span class="p">,</span> <span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">]}</span>
        <span class="n">golden</span> <span class="o">=</span> <span class="p">{</span><span class="s">&#39;output_data&#39;</span><span class="p">:</span> <span class="p">[</span><span class="s">&#39;/task/abc123&#39;</span><span class="p">,</span> <span class="p">{</span><span class="s">&#39;force&#39;</span><span class="p">:</span> <span class="k">True</span><span class="p">},</span> <span class="s">&#39;DELETE&#39;</span><span class="p">]}</span>
        <span class="n">res</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">api</span><span class="o">.</span><span class="n">delete</span><span class="p">(</span><span class="s">&#39;task&#39;</span><span class="p">,</span> <span class="s">&#39;abc123&#39;</span><span class="p">,</span> <span class="k">True</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">res</span><span class="p">,</span> <span class="n">golden</span><span class="p">)</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">api</span><span class="o">.</span><span class="n">_request</span> <span class="o">=</span> <span class="k">lambda</span> <span class="n">w</span><span class="p">,</span> <span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">:</span> <span class="p">{</span><span class="s">&#39;output_data&#39;</span><span class="p">:</span> <span class="p">[</span><span class="n">w</span><span class="p">,</span> <span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">]}</span>
        <span class="n">golden</span> <span class="o">=</span> <span class="p">{</span><span class="s">&#39;output_data&#39;</span><span class="p">:</span> <span class="p">[</span><span class="s">&#39;/task/abc123&#39;</span><span class="p">,</span> <span class="p">{</span><span class="s">&#39;force&#39;</span><span class="p">:</span> <span class="k">True</span><span class="p">},</span> <span class="s">&#39;DELETE&#39;</span><span class="p">]}</span>
        <span class="n">res</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">api</span><span class="o">.</span><span class="n">delete</span><span class="p">(</span><span class="s">&#39;task&#39;</span><span class="p">,</span> <span class="s">&#39;abc123&#39;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">res</span><span class="p">,</span> <span class="n">golden</span><span class="p">)</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">api</span><span class="o">.</span><span class="n">_request</span> <span class="o">=</span> <span class="k">lambda</span> <span class="n">w</span><span class="p">,</span> <span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">:</span> <span class="p">{</span><span class="s">&#39;output_data&#39;</span><span class="p">:</span> <span class="p">[</span><span class="n">w</span><span class="p">,</span> <span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">]}</span>
        <span class="n">golden</span> <span class="o">=</span> <span class="p">{</span><span class="s">&#39;output_data&#39;</span><span class="p">:</span> <span class="p">[</span><span class="s">&#39;/task/abc123&#39;</span><span class="p">,</span> <span class="p">{</span><span class="s">&#39;force&#39;</span><span class="p">:</span> <span class="k">False</span><span class="p">},</span> <span class="s">&#39;DELETE&#39;</span><span class="p">]}</span>
        <span class="n">res</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">api</span><span class="o">.</span><span class="n">delete</span><span class="p">(</span><span class="s">&#39;task&#39;</span><span class="p">,</span> <span class="s">&#39;abc123&#39;</span><span class="p">,</span> <span class="k">False</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">res</span><span class="p">,</span> <span class="n">golden</span><span class="p">)</span></div>

<div class="viewcode-block" id="TestWorkfront.test_bulk_delete"><a class="viewcode-back" href="../../tests.html#tests.test_api.TestWorkfront.test_bulk_delete">[docs]</a>    <span class="k">def</span> <span class="nf">test_bulk_delete</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">obj_ids</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">316</span><span class="p">):</span>
            <span class="n">obj_ids</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="nb">str</span><span class="p">(</span><span class="n">x</span> <span class="o">*</span> <span class="mi">5</span><span class="p">))</span>
        <span class="c"># With fields</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">api</span><span class="o">.</span><span class="n">_request</span> <span class="o">=</span> <span class="k">lambda</span> <span class="n">path</span><span class="p">,</span> <span class="n">objcode</span><span class="p">,</span> <span class="n">obj_ids</span><span class="p">:</span> <span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">hash_dict</span><span class="p">(</span><span class="n">obj_ids</span><span class="p">)]</span>
        <span class="n">res</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">api</span><span class="o">.</span><span class="n">bulk_delete</span><span class="p">(</span><span class="s">&#39;task&#39;</span><span class="p">,</span> <span class="n">obj_ids</span><span class="p">,</span> <span class="p">[</span><span class="s">&#39;a&#39;</span><span class="p">,</span> <span class="s">&#39;b&#39;</span><span class="p">])</span>
        <span class="n">golden</span> <span class="o">=</span> <span class="p">[</span><span class="s">&#39;3c37ef8e02b141e11835637d278ea545974728b6&#39;</span><span class="p">,</span> <span class="s">&#39;3c37ef8e02b141e11835637d278ea545974728b6&#39;</span><span class="p">,</span>
                  <span class="s">&#39;3c37ef8e02b141e11835637d278ea545974728b6&#39;</span><span class="p">,</span> <span class="s">&#39;3c37ef8e02b141e11835637d278ea545974728b6&#39;</span><span class="p">]</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">res</span><span class="p">,</span> <span class="n">golden</span><span class="p">)</span>

        <span class="c"># Check the path</span>
        <span class="n">obj_ids</span> <span class="o">=</span> <span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">]</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">api</span><span class="o">.</span><span class="n">_request</span> <span class="o">=</span> <span class="k">lambda</span> <span class="n">path</span><span class="p">,</span> <span class="n">objcode</span><span class="p">,</span> <span class="n">obj_ids</span><span class="p">:</span> <span class="n">path</span>
        <span class="n">res</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">api</span><span class="o">.</span><span class="n">bulk_delete</span><span class="p">(</span><span class="s">&#39;task&#39;</span><span class="p">,</span> <span class="n">obj_ids</span><span class="p">,</span> <span class="p">[</span><span class="s">&#39;a&#39;</span><span class="p">,</span> <span class="s">&#39;b&#39;</span><span class="p">])</span>
        <span class="n">path</span> <span class="o">=</span> <span class="s">&quot;/task&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">res</span><span class="p">,</span> <span class="n">path</span><span class="p">)</span>

        <span class="n">obj_ids</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">82</span><span class="p">):</span>
            <span class="n">obj_ids</span><span class="o">.</span><span class="n">append</span><span class="p">({</span><span class="s">&#39;ID&#39;</span><span class="p">:</span> <span class="nb">str</span><span class="p">(</span><span class="n">x</span> <span class="o">*</span> <span class="mi">5</span><span class="p">),</span> <span class="s">&#39;name&#39;</span><span class="p">:</span> <span class="s">&#39;blarg&#39;</span><span class="p">})</span>
        <span class="c"># With fields</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">api</span><span class="o">.</span><span class="n">_request</span> <span class="o">=</span> <span class="k">lambda</span> <span class="n">path</span><span class="p">,</span> <span class="n">objcode</span><span class="p">,</span> <span class="n">obj_ids</span><span class="p">:</span> <span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">hash_dict</span><span class="p">(</span><span class="n">obj_ids</span><span class="p">)]</span>
        <span class="n">res</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">api</span><span class="o">.</span><span class="n">bulk_delete</span><span class="p">(</span><span class="s">&#39;task&#39;</span><span class="p">,</span> <span class="n">obj_ids</span><span class="p">,</span> <span class="p">[</span><span class="s">&#39;a&#39;</span><span class="p">,</span> <span class="s">&#39;b&#39;</span><span class="p">])</span>
        <span class="n">golden</span> <span class="o">=</span> <span class="p">[</span><span class="s">&#39;3c37ef8e02b141e11835637d278ea545974728b6&#39;</span><span class="p">]</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">res</span><span class="p">,</span> <span class="n">golden</span><span class="p">)</span></div>

<div class="viewcode-block" id="TestWorkfront.test_search"><a class="viewcode-back" href="../../tests.html#tests.test_api.TestWorkfront.test_search">[docs]</a>    <span class="k">def</span> <span class="nf">test_search</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="c"># Test without limit or get_all</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">api</span><span class="o">.</span><span class="n">_request</span> <span class="o">=</span> <span class="k">lambda</span> <span class="n">path</span><span class="p">,</span> <span class="n">params</span><span class="p">,</span> <span class="n">method</span><span class="p">,</span> <span class="n">fields</span><span class="p">:</span> <span class="p">{</span><span class="s">&#39;path&#39;</span><span class="p">:</span> <span class="n">path</span><span class="p">,</span>
                                                                  <span class="s">&#39;params&#39;</span><span class="p">:</span> <span class="n">params</span><span class="p">,</span>
                                                                  <span class="s">&#39;method&#39;</span><span class="p">:</span> <span class="n">method</span><span class="p">,</span>
                                                                  <span class="s">&#39;fields&#39;</span><span class="p">:</span> <span class="n">fields</span><span class="p">}</span>
        <span class="n">golden</span> <span class="o">=</span> <span class="p">{</span><span class="s">&#39;params&#39;</span><span class="p">:</span> <span class="p">{</span><span class="s">&#39;a&#39;</span><span class="p">:</span> <span class="s">&#39;x&#39;</span><span class="p">,</span> <span class="s">&#39;b&#39;</span><span class="p">:</span> <span class="s">&#39;x&#39;</span><span class="p">},</span> <span class="s">&#39;fields&#39;</span><span class="p">:</span> <span class="p">[</span><span class="s">&#39;f1&#39;</span><span class="p">,</span> <span class="s">&#39;f2&#39;</span><span class="p">],</span> <span class="s">&#39;method&#39;</span><span class="p">:</span> <span class="s">&#39;GET&#39;</span><span class="p">,</span> <span class="s">&#39;path&#39;</span><span class="p">:</span> <span class="s">&#39;/task/search&#39;</span><span class="p">}</span>
        <span class="n">res</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">api</span><span class="o">.</span><span class="n">search</span><span class="p">(</span><span class="s">&#39;task&#39;</span><span class="p">,</span> <span class="p">{</span><span class="s">&#39;a&#39;</span><span class="p">:</span> <span class="s">&#39;x&#39;</span><span class="p">,</span> <span class="s">&#39;b&#39;</span><span class="p">:</span> <span class="s">&#39;x&#39;</span><span class="p">},</span> <span class="p">[</span><span class="s">&#39;f1&#39;</span><span class="p">,</span> <span class="s">&#39;f2&#39;</span><span class="p">])</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">golden</span><span class="p">,</span> <span class="n">res</span><span class="p">)</span>

        <span class="c"># Test without limit or get_all or fields</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">api</span><span class="o">.</span><span class="n">_request</span> <span class="o">=</span> <span class="k">lambda</span> <span class="n">path</span><span class="p">,</span> <span class="n">params</span><span class="p">,</span> <span class="n">method</span><span class="p">,</span> <span class="n">fields</span><span class="p">:</span> <span class="p">{</span><span class="s">&#39;path&#39;</span><span class="p">:</span> <span class="n">path</span><span class="p">,</span>
                                                                  <span class="s">&#39;params&#39;</span><span class="p">:</span> <span class="n">params</span><span class="p">,</span>
                                                                  <span class="s">&#39;method&#39;</span><span class="p">:</span> <span class="n">method</span><span class="p">,</span>
                                                                  <span class="s">&#39;fields&#39;</span><span class="p">:</span> <span class="n">fields</span><span class="p">}</span>
        <span class="n">golden</span> <span class="o">=</span> <span class="p">{</span><span class="s">&#39;method&#39;</span><span class="p">:</span> <span class="s">&#39;GET&#39;</span><span class="p">,</span> <span class="s">&#39;fields&#39;</span><span class="p">:</span> <span class="k">None</span><span class="p">,</span> <span class="s">&#39;path&#39;</span><span class="p">:</span> <span class="s">&#39;/task/search&#39;</span><span class="p">,</span> <span class="s">&#39;params&#39;</span><span class="p">:</span> <span class="p">{</span><span class="s">&#39;b&#39;</span><span class="p">:</span> <span class="s">&#39;x&#39;</span><span class="p">,</span> <span class="s">&#39;a&#39;</span><span class="p">:</span> <span class="s">&#39;x&#39;</span><span class="p">}}</span>
        <span class="n">res</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">api</span><span class="o">.</span><span class="n">search</span><span class="p">(</span><span class="s">&#39;task&#39;</span><span class="p">,</span> <span class="p">{</span><span class="s">&#39;a&#39;</span><span class="p">:</span> <span class="s">&#39;x&#39;</span><span class="p">,</span> <span class="s">&#39;b&#39;</span><span class="p">:</span> <span class="s">&#39;x&#39;</span><span class="p">})</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">golden</span><span class="p">,</span> <span class="n">res</span><span class="p">)</span>

        <span class="c"># Test with get_all - 2500 results</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">api</span><span class="o">.</span><span class="n">_count</span> <span class="o">=</span> <span class="k">lambda</span> <span class="n">objcode</span><span class="p">,</span> <span class="n">params</span><span class="p">:</span> <span class="mi">2500</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">api</span><span class="o">.</span><span class="n">_request</span> <span class="o">=</span> <span class="k">lambda</span> <span class="n">path</span><span class="p">,</span> <span class="n">params</span><span class="p">,</span> <span class="n">method</span><span class="p">,</span> <span class="n">fields</span><span class="p">:</span> <span class="p">[{</span><span class="s">&#39;path&#39;</span><span class="p">:</span> <span class="n">path</span><span class="p">,</span>
                                                                   <span class="s">&#39;params&#39;</span><span class="p">:</span> <span class="n">params</span><span class="p">,</span>
                                                                   <span class="s">&#39;method&#39;</span><span class="p">:</span> <span class="n">method</span><span class="p">,</span>
                                                                   <span class="s">&#39;fields&#39;</span><span class="p">:</span> <span class="n">fields</span><span class="p">}]</span>
        <span class="n">golden</span> <span class="o">=</span> <span class="p">[{</span><span class="s">&#39;params&#39;</span><span class="p">:</span> <span class="p">{</span><span class="s">&#39;$$FIRST&#39;</span><span class="p">:</span> <span class="mi">2000</span><span class="p">,</span> <span class="s">&#39;b&#39;</span><span class="p">:</span> <span class="s">&#39;x&#39;</span><span class="p">,</span> <span class="s">&#39;$$LIMIT&#39;</span><span class="p">:</span> <span class="mi">500</span><span class="p">,</span> <span class="s">&#39;a&#39;</span><span class="p">:</span> <span class="s">&#39;x&#39;</span><span class="p">},</span> <span class="s">&#39;method&#39;</span><span class="p">:</span> <span class="s">&#39;GET&#39;</span><span class="p">,</span> <span class="s">&#39;path&#39;</span><span class="p">:</span> <span class="s">&#39;/task/search&#39;</span><span class="p">,</span> <span class="s">&#39;fields&#39;</span><span class="p">:</span> <span class="p">[</span><span class="s">&#39;f1&#39;</span><span class="p">,</span> <span class="s">&#39;f2&#39;</span><span class="p">]},</span> <span class="p">{</span><span class="s">&#39;params&#39;</span><span class="p">:</span> <span class="p">{</span><span class="s">&#39;$$FIRST&#39;</span><span class="p">:</span> <span class="mi">2000</span><span class="p">,</span> <span class="s">&#39;b&#39;</span><span class="p">:</span> <span class="s">&#39;x&#39;</span><span class="p">,</span> <span class="s">&#39;$$LIMIT&#39;</span><span class="p">:</span> <span class="mi">500</span><span class="p">,</span> <span class="s">&#39;a&#39;</span><span class="p">:</span> <span class="s">&#39;x&#39;</span><span class="p">},</span> <span class="s">&#39;method&#39;</span><span class="p">:</span> <span class="s">&#39;GET&#39;</span><span class="p">,</span> <span class="s">&#39;path&#39;</span><span class="p">:</span> <span class="s">&#39;/task/search&#39;</span><span class="p">,</span> <span class="s">&#39;fields&#39;</span><span class="p">:</span> <span class="p">[</span><span class="s">&#39;f1&#39;</span><span class="p">,</span> <span class="s">&#39;f2&#39;</span><span class="p">]}]</span>
        <span class="n">res</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">api</span><span class="o">.</span><span class="n">search</span><span class="p">(</span><span class="s">&#39;task&#39;</span><span class="p">,</span> <span class="p">{</span><span class="s">&#39;a&#39;</span><span class="p">:</span> <span class="s">&#39;x&#39;</span><span class="p">,</span> <span class="s">&#39;b&#39;</span><span class="p">:</span> <span class="s">&#39;x&#39;</span><span class="p">},</span> <span class="p">[</span><span class="s">&#39;f1&#39;</span><span class="p">,</span> <span class="s">&#39;f2&#39;</span><span class="p">],</span> <span class="n">get_all</span><span class="o">=</span><span class="k">True</span><span class="p">)</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">assertCountEqual</span><span class="p">(</span><span class="n">golden</span><span class="p">,</span> <span class="n">res</span><span class="p">)</span>

        <span class="c"># Test with get_all - 6120 results</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">api</span><span class="o">.</span><span class="n">_count</span> <span class="o">=</span> <span class="k">lambda</span> <span class="n">objcode</span><span class="p">,</span> <span class="n">params</span><span class="p">:</span> <span class="mi">6120</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">api</span><span class="o">.</span><span class="n">_request</span> <span class="o">=</span> <span class="k">lambda</span> <span class="n">path</span><span class="p">,</span> <span class="n">params</span><span class="p">,</span> <span class="n">method</span><span class="p">,</span> <span class="n">fields</span><span class="p">:</span> <span class="p">[{</span><span class="s">&#39;path&#39;</span><span class="p">:</span> <span class="n">path</span><span class="p">,</span>
                                                                   <span class="s">&#39;params&#39;</span><span class="p">:</span> <span class="n">params</span><span class="p">,</span>
                                                                   <span class="s">&#39;method&#39;</span><span class="p">:</span> <span class="n">method</span><span class="p">,</span>
                                                                   <span class="s">&#39;fields&#39;</span><span class="p">:</span> <span class="n">fields</span><span class="p">}]</span>
        <span class="n">golden</span> <span class="o">=</span> <span class="p">[{</span><span class="s">&#39;path&#39;</span><span class="p">:</span> <span class="s">&#39;/task/search&#39;</span><span class="p">,</span> <span class="s">&#39;method&#39;</span><span class="p">:</span> <span class="s">&#39;GET&#39;</span><span class="p">,</span> <span class="s">&#39;params&#39;</span><span class="p">:</span> <span class="p">{</span><span class="s">&#39;b&#39;</span><span class="p">:</span> <span class="s">&#39;x&#39;</span><span class="p">,</span> <span class="s">&#39;a&#39;</span><span class="p">:</span> <span class="s">&#39;x&#39;</span><span class="p">,</span> <span class="s">&#39;$$LIMIT&#39;</span><span class="p">:</span> <span class="mi">120</span><span class="p">,</span> <span class="s">&#39;$$FIRST&#39;</span><span class="p">:</span> <span class="mi">6000</span><span class="p">},</span> <span class="s">&#39;fields&#39;</span><span class="p">:</span> <span class="p">[</span><span class="s">&#39;f1&#39;</span><span class="p">,</span> <span class="s">&#39;f2&#39;</span><span class="p">]},</span> <span class="p">{</span><span class="s">&#39;path&#39;</span><span class="p">:</span> <span class="s">&#39;/task/search&#39;</span><span class="p">,</span> <span class="s">&#39;method&#39;</span><span class="p">:</span> <span class="s">&#39;GET&#39;</span><span class="p">,</span> <span class="s">&#39;params&#39;</span><span class="p">:</span> <span class="p">{</span><span class="s">&#39;b&#39;</span><span class="p">:</span> <span class="s">&#39;x&#39;</span><span class="p">,</span> <span class="s">&#39;a&#39;</span><span class="p">:</span> <span class="s">&#39;x&#39;</span><span class="p">,</span> <span class="s">&#39;$$LIMIT&#39;</span><span class="p">:</span> <span class="mi">120</span><span class="p">,</span> <span class="s">&#39;$$FIRST&#39;</span><span class="p">:</span> <span class="mi">6000</span><span class="p">},</span> <span class="s">&#39;fields&#39;</span><span class="p">:</span> <span class="p">[</span><span class="s">&#39;f1&#39;</span><span class="p">,</span> <span class="s">&#39;f2&#39;</span><span class="p">]},</span> <span class="p">{</span><span class="s">&#39;path&#39;</span><span class="p">:</span> <span class="s">&#39;/task/search&#39;</span><span class="p">,</span> <span class="s">&#39;method&#39;</span><span class="p">:</span> <span class="s">&#39;GET&#39;</span><span class="p">,</span> <span class="s">&#39;params&#39;</span><span class="p">:</span> <span class="p">{</span><span class="s">&#39;b&#39;</span><span class="p">:</span> <span class="s">&#39;x&#39;</span><span class="p">,</span> <span class="s">&#39;a&#39;</span><span class="p">:</span> <span class="s">&#39;x&#39;</span><span class="p">,</span> <span class="s">&#39;$$LIMIT&#39;</span><span class="p">:</span> <span class="mi">120</span><span class="p">,</span> <span class="s">&#39;$$FIRST&#39;</span><span class="p">:</span> <span class="mi">6000</span><span class="p">},</span> <span class="s">&#39;fields&#39;</span><span class="p">:</span> <span class="p">[</span><span class="s">&#39;f1&#39;</span><span class="p">,</span> <span class="s">&#39;f2&#39;</span><span class="p">]},</span> <span class="p">{</span><span class="s">&#39;path&#39;</span><span class="p">:</span> <span class="s">&#39;/task/search&#39;</span><span class="p">,</span> <span class="s">&#39;method&#39;</span><span class="p">:</span> <span class="s">&#39;GET&#39;</span><span class="p">,</span> <span class="s">&#39;params&#39;</span><span class="p">:</span> <span class="p">{</span><span class="s">&#39;b&#39;</span><span class="p">:</span> <span class="s">&#39;x&#39;</span><span class="p">,</span> <span class="s">&#39;a&#39;</span><span class="p">:</span> <span class="s">&#39;x&#39;</span><span class="p">,</span> <span class="s">&#39;$$LIMIT&#39;</span><span class="p">:</span> <span class="mi">120</span><span class="p">,</span> <span class="s">&#39;$$FIRST&#39;</span><span class="p">:</span> <span class="mi">6000</span><span class="p">},</span> <span class="s">&#39;fields&#39;</span><span class="p">:</span> <span class="p">[</span><span class="s">&#39;f1&#39;</span><span class="p">,</span> <span class="s">&#39;f2&#39;</span><span class="p">]}]</span>

        <span class="n">res</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">api</span><span class="o">.</span><span class="n">search</span><span class="p">(</span><span class="s">&#39;task&#39;</span><span class="p">,</span> <span class="p">{</span><span class="s">&#39;a&#39;</span><span class="p">:</span> <span class="s">&#39;x&#39;</span><span class="p">,</span> <span class="s">&#39;b&#39;</span><span class="p">:</span> <span class="s">&#39;x&#39;</span><span class="p">},</span> <span class="p">[</span><span class="s">&#39;f1&#39;</span><span class="p">,</span> <span class="s">&#39;f2&#39;</span><span class="p">],</span> <span class="n">get_all</span><span class="o">=</span><span class="k">True</span><span class="p">)</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">assertCountEqual</span><span class="p">(</span><span class="n">golden</span><span class="p">,</span> <span class="n">res</span><span class="p">)</span>

        <span class="c"># Test with get_all - 413 results</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">api</span><span class="o">.</span><span class="n">_count</span> <span class="o">=</span> <span class="k">lambda</span> <span class="n">objcode</span><span class="p">,</span> <span class="n">params</span><span class="p">:</span> <span class="mi">413</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">api</span><span class="o">.</span><span class="n">_request</span> <span class="o">=</span> <span class="k">lambda</span> <span class="n">path</span><span class="p">,</span> <span class="n">params</span><span class="p">,</span> <span class="n">method</span><span class="p">,</span> <span class="n">fields</span><span class="p">:</span> <span class="p">[{</span><span class="s">&#39;path&#39;</span><span class="p">:</span> <span class="n">path</span><span class="p">,</span>
                                                                   <span class="s">&#39;params&#39;</span><span class="p">:</span> <span class="n">params</span><span class="p">,</span>
                                                                   <span class="s">&#39;method&#39;</span><span class="p">:</span> <span class="n">method</span><span class="p">,</span>
                                                                   <span class="s">&#39;fields&#39;</span><span class="p">:</span> <span class="n">fields</span><span class="p">}]</span>
        <span class="n">golden</span> <span class="o">=</span> <span class="p">[{</span><span class="s">&#39;path&#39;</span><span class="p">:</span> <span class="s">&#39;/task/search&#39;</span><span class="p">,</span> <span class="s">&#39;method&#39;</span><span class="p">:</span> <span class="s">&#39;GET&#39;</span><span class="p">,</span> <span class="s">&#39;fields&#39;</span><span class="p">:</span> <span class="p">[</span><span class="s">&#39;f1&#39;</span><span class="p">,</span> <span class="s">&#39;f2&#39;</span><span class="p">],</span>
                   <span class="s">&#39;params&#39;</span><span class="p">:</span> <span class="p">{</span><span class="s">&#39;$$LIMIT&#39;</span><span class="p">:</span> <span class="mi">413</span><span class="p">,</span> <span class="s">&#39;b&#39;</span><span class="p">:</span> <span class="s">&#39;x&#39;</span><span class="p">,</span> <span class="s">&#39;a&#39;</span><span class="p">:</span> <span class="s">&#39;x&#39;</span><span class="p">,</span> <span class="s">&#39;$$FIRST&#39;</span><span class="p">:</span> <span class="mi">0</span><span class="p">}}]</span>
        <span class="n">res</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">api</span><span class="o">.</span><span class="n">search</span><span class="p">(</span><span class="s">&#39;task&#39;</span><span class="p">,</span> <span class="p">{</span><span class="s">&#39;a&#39;</span><span class="p">:</span> <span class="s">&#39;x&#39;</span><span class="p">,</span> <span class="s">&#39;b&#39;</span><span class="p">:</span> <span class="s">&#39;x&#39;</span><span class="p">},</span> <span class="p">[</span><span class="s">&#39;f1&#39;</span><span class="p">,</span> <span class="s">&#39;f2&#39;</span><span class="p">],</span> <span class="n">get_all</span><span class="o">=</span><span class="k">True</span><span class="p">)</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">assertCountEqual</span><span class="p">(</span><span class="n">golden</span><span class="p">,</span> <span class="n">res</span><span class="p">)</span>

        <span class="c"># Test with limit count over limit</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">api</span><span class="o">.</span><span class="n">_count</span> <span class="o">=</span> <span class="k">lambda</span> <span class="n">objcode</span><span class="p">,</span> <span class="n">params</span><span class="p">:</span> <span class="mi">6120</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">api</span><span class="o">.</span><span class="n">_request</span> <span class="o">=</span> <span class="k">lambda</span> <span class="n">path</span><span class="p">,</span> <span class="n">params</span><span class="p">,</span> <span class="n">method</span><span class="p">,</span> <span class="n">fields</span><span class="p">:</span> <span class="p">[{</span><span class="s">&#39;path&#39;</span><span class="p">:</span> <span class="n">path</span><span class="p">,</span>
                                                                   <span class="s">&#39;params&#39;</span><span class="p">:</span> <span class="n">params</span><span class="p">,</span>
                                                                   <span class="s">&#39;method&#39;</span><span class="p">:</span> <span class="n">method</span><span class="p">,</span>
                                                                   <span class="s">&#39;fields&#39;</span><span class="p">:</span> <span class="n">fields</span><span class="p">}]</span>

        <span class="n">golden</span> <span class="o">=</span> <span class="p">[{</span><span class="s">&#39;path&#39;</span><span class="p">:</span> <span class="s">&#39;/task/search&#39;</span><span class="p">,</span> <span class="s">&#39;method&#39;</span><span class="p">:</span> <span class="s">&#39;GET&#39;</span><span class="p">,</span> <span class="s">&#39;params&#39;</span><span class="p">:</span> <span class="p">{</span><span class="s">&#39;$$FIRST&#39;</span><span class="p">:</span> <span class="mi">4000</span><span class="p">,</span> <span class="s">&#39;b&#39;</span><span class="p">:</span> <span class="s">&#39;x&#39;</span><span class="p">,</span> <span class="s">&#39;$$LIMIT&#39;</span><span class="p">:</span> <span class="mi">10</span><span class="p">,</span> <span class="s">&#39;a&#39;</span><span class="p">:</span> <span class="s">&#39;x&#39;</span><span class="p">},</span> <span class="s">&#39;fields&#39;</span><span class="p">:</span> <span class="p">[</span><span class="s">&#39;f1&#39;</span><span class="p">,</span> <span class="s">&#39;f2&#39;</span><span class="p">]},</span> <span class="p">{</span><span class="s">&#39;path&#39;</span><span class="p">:</span> <span class="s">&#39;/task/search&#39;</span><span class="p">,</span> <span class="s">&#39;method&#39;</span><span class="p">:</span> <span class="s">&#39;GET&#39;</span><span class="p">,</span> <span class="s">&#39;params&#39;</span><span class="p">:</span> <span class="p">{</span><span class="s">&#39;$$FIRST&#39;</span><span class="p">:</span> <span class="mi">4000</span><span class="p">,</span> <span class="s">&#39;b&#39;</span><span class="p">:</span> <span class="s">&#39;x&#39;</span><span class="p">,</span> <span class="s">&#39;$$LIMIT&#39;</span><span class="p">:</span> <span class="mi">10</span><span class="p">,</span> <span class="s">&#39;a&#39;</span><span class="p">:</span> <span class="s">&#39;x&#39;</span><span class="p">},</span> <span class="s">&#39;fields&#39;</span><span class="p">:</span> <span class="p">[</span><span class="s">&#39;f1&#39;</span><span class="p">,</span> <span class="s">&#39;f2&#39;</span><span class="p">]},</span> <span class="p">{</span><span class="s">&#39;path&#39;</span><span class="p">:</span> <span class="s">&#39;/task/search&#39;</span><span class="p">,</span> <span class="s">&#39;method&#39;</span><span class="p">:</span> <span class="s">&#39;GET&#39;</span><span class="p">,</span> <span class="s">&#39;params&#39;</span><span class="p">:</span> <span class="p">{</span><span class="s">&#39;$$FIRST&#39;</span><span class="p">:</span> <span class="mi">4000</span><span class="p">,</span> <span class="s">&#39;b&#39;</span><span class="p">:</span> <span class="s">&#39;x&#39;</span><span class="p">,</span> <span class="s">&#39;$$LIMIT&#39;</span><span class="p">:</span> <span class="mi">10</span><span class="p">,</span> <span class="s">&#39;a&#39;</span><span class="p">:</span> <span class="s">&#39;x&#39;</span><span class="p">},</span> <span class="s">&#39;fields&#39;</span><span class="p">:</span> <span class="p">[</span><span class="s">&#39;f1&#39;</span><span class="p">,</span> <span class="s">&#39;f2&#39;</span><span class="p">]}]</span>
        <span class="n">res</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">api</span><span class="o">.</span><span class="n">search</span><span class="p">(</span><span class="s">&#39;task&#39;</span><span class="p">,</span> <span class="p">{</span><span class="s">&#39;a&#39;</span><span class="p">:</span> <span class="s">&#39;x&#39;</span><span class="p">,</span> <span class="s">&#39;b&#39;</span><span class="p">:</span> <span class="s">&#39;x&#39;</span><span class="p">},</span> <span class="p">[</span><span class="s">&#39;f1&#39;</span><span class="p">,</span> <span class="s">&#39;f2&#39;</span><span class="p">],</span> <span class="n">limit</span><span class="o">=</span><span class="mi">4010</span><span class="p">)</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">assertCountEqual</span><span class="p">(</span><span class="n">golden</span><span class="p">,</span> <span class="n">res</span><span class="p">)</span>

        <span class="c"># Test with limit count over limit</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">api</span><span class="o">.</span><span class="n">_count</span> <span class="o">=</span> <span class="k">lambda</span> <span class="n">objcode</span><span class="p">,</span> <span class="n">params</span><span class="p">:</span> <span class="mi">2100</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">api</span><span class="o">.</span><span class="n">_request</span> <span class="o">=</span> <span class="k">lambda</span> <span class="n">path</span><span class="p">,</span> <span class="n">params</span><span class="p">,</span> <span class="n">method</span><span class="p">,</span> <span class="n">fields</span><span class="p">:</span> <span class="p">[{</span><span class="s">&#39;path&#39;</span><span class="p">:</span> <span class="n">path</span><span class="p">,</span>
                                                                   <span class="s">&#39;params&#39;</span><span class="p">:</span> <span class="n">params</span><span class="p">,</span>
                                                                   <span class="s">&#39;method&#39;</span><span class="p">:</span> <span class="n">method</span><span class="p">,</span>
                                                                   <span class="s">&#39;fields&#39;</span><span class="p">:</span> <span class="n">fields</span><span class="p">}]</span>
        <span class="n">golden</span> <span class="o">=</span> <span class="p">[{</span><span class="s">&#39;method&#39;</span><span class="p">:</span> <span class="s">&#39;GET&#39;</span><span class="p">,</span> <span class="s">&#39;fields&#39;</span><span class="p">:</span> <span class="p">[</span><span class="s">&#39;f1&#39;</span><span class="p">,</span> <span class="s">&#39;f2&#39;</span><span class="p">],</span> <span class="s">&#39;path&#39;</span><span class="p">:</span> <span class="s">&#39;/task/search&#39;</span><span class="p">,</span> <span class="s">&#39;params&#39;</span><span class="p">:</span> <span class="p">{</span><span class="s">&#39;$$LIMIT&#39;</span><span class="p">:</span> <span class="mi">100</span><span class="p">,</span> <span class="s">&#39;a&#39;</span><span class="p">:</span> <span class="s">&#39;x&#39;</span><span class="p">,</span> <span class="s">&#39;$$FIRST&#39;</span><span class="p">:</span> <span class="mi">2000</span><span class="p">,</span> <span class="s">&#39;b&#39;</span><span class="p">:</span> <span class="s">&#39;x&#39;</span><span class="p">}},</span> <span class="p">{</span><span class="s">&#39;method&#39;</span><span class="p">:</span> <span class="s">&#39;GET&#39;</span><span class="p">,</span> <span class="s">&#39;fields&#39;</span><span class="p">:</span> <span class="p">[</span><span class="s">&#39;f1&#39;</span><span class="p">,</span> <span class="s">&#39;f2&#39;</span><span class="p">],</span> <span class="s">&#39;path&#39;</span><span class="p">:</span> <span class="s">&#39;/task/search&#39;</span><span class="p">,</span> <span class="s">&#39;params&#39;</span><span class="p">:</span> <span class="p">{</span><span class="s">&#39;$$LIMIT&#39;</span><span class="p">:</span> <span class="mi">100</span><span class="p">,</span> <span class="s">&#39;a&#39;</span><span class="p">:</span> <span class="s">&#39;x&#39;</span><span class="p">,</span> <span class="s">&#39;$$FIRST&#39;</span><span class="p">:</span> <span class="mi">2000</span><span class="p">,</span> <span class="s">&#39;b&#39;</span><span class="p">:</span> <span class="s">&#39;x&#39;</span><span class="p">}}]</span>
        <span class="n">res</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">api</span><span class="o">.</span><span class="n">search</span><span class="p">(</span><span class="s">&#39;task&#39;</span><span class="p">,</span> <span class="p">{</span><span class="s">&#39;a&#39;</span><span class="p">:</span> <span class="s">&#39;x&#39;</span><span class="p">,</span> <span class="s">&#39;b&#39;</span><span class="p">:</span> <span class="s">&#39;x&#39;</span><span class="p">},</span> <span class="p">[</span><span class="s">&#39;f1&#39;</span><span class="p">,</span> <span class="s">&#39;f2&#39;</span><span class="p">],</span> <span class="n">limit</span><span class="o">=</span><span class="mi">4000</span><span class="p">)</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">assertCountEqual</span><span class="p">(</span><span class="n">golden</span><span class="p">,</span> <span class="n">res</span><span class="p">)</span></div>
        <span class="c"># Test with limit and get_all</span>

<div class="viewcode-block" id="TestWorkfront.test_count"><a class="viewcode-back" href="../../tests.html#tests.test_api.TestWorkfront.test_count">[docs]</a>    <span class="k">def</span> <span class="nf">test_count</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">pass</span></div>

<div class="viewcode-block" id="TestWorkfront.test_report"><a class="viewcode-back" href="../../tests.html#tests.test_api.TestWorkfront.test_report">[docs]</a>    <span class="k">def</span> <span class="nf">test_report</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">pass</span></div>

<div class="viewcode-block" id="TestWorkfront.test_make_update_as_user"><a class="viewcode-back" href="../../tests.html#tests.test_api.TestWorkfront.test_make_update_as_user">[docs]</a>    <span class="k">def</span> <span class="nf">test_make_update_as_user</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">pass</span></div>

<div class="viewcode-block" id="TestWorkfront.test__parse_parameter_lists"><a class="viewcode-back" href="../../tests.html#tests.test_api.TestWorkfront.test__parse_parameter_lists">[docs]</a>    <span class="k">def</span> <span class="nf">test__parse_parameter_lists</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>

        <span class="n">params</span> <span class="o">=</span> <span class="p">{</span><span class="s">&#39;status&#39;</span><span class="p">:</span> <span class="p">[</span><span class="s">&#39;CUR&#39;</span><span class="p">,</span> <span class="s">&#39;PLN&#39;</span><span class="p">,</span> <span class="s">&#39;APP&#39;</span><span class="p">],</span>
                  <span class="s">&#39;status_Mod&#39;</span><span class="p">:</span> <span class="s">&#39;in&#39;</span><span class="p">}</span>
        <span class="n">res</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">api</span><span class="o">.</span><span class="n">_parse_parameter_lists</span><span class="p">(</span><span class="n">params</span><span class="p">)</span>
        <span class="c"># Convert to a list so there can be a stable order to the elements. Without this Python will somewhat</span>
        <span class="c"># randomly re-order the elements.</span>
        <span class="n">res</span> <span class="o">=</span> <span class="nb">sorted</span><span class="p">(</span><span class="n">res</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="s">&quot;&amp;&quot;</span><span class="p">))</span>
        <span class="n">golden</span> <span class="o">=</span> <span class="p">[</span><span class="s">&#39;status=APP&#39;</span><span class="p">,</span> <span class="s">&#39;status=CUR&#39;</span><span class="p">,</span> <span class="s">&#39;status=PLN&#39;</span><span class="p">,</span> <span class="s">&#39;status_Mod=in&#39;</span><span class="p">]</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">res</span><span class="p">,</span> <span class="n">golden</span><span class="p">)</span>

        <span class="n">params</span> <span class="o">=</span> <span class="p">{}</span>
        <span class="n">params</span><span class="p">[</span><span class="s">&#39;assignedToID_Mod&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="s">&quot;notblank&quot;</span>
        <span class="n">params</span><span class="p">[</span><span class="s">&#39;percentComplete&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="s">&quot;100&quot;</span>
        <span class="n">params</span><span class="p">[</span><span class="s">&#39;percentComplete_Mod&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="s">&quot;lt&quot;</span>

        <span class="n">params</span><span class="p">[</span><span class="s">&#39;canStart&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="p">[</span><span class="s">&#39;true&#39;</span><span class="p">,</span> <span class="s">&#39;false&#39;</span><span class="p">,</span> <span class="s">&#39;maybe&#39;</span><span class="p">]</span>
        <span class="n">params</span><span class="p">[</span><span class="s">&#39;canStart_Mod&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="s">&#39;in&#39;</span>

        <span class="n">params</span><span class="p">[</span><span class="s">&#39;plannedStartDate&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="s">&#39;$$TODAY+5d&#39;</span>
        <span class="n">params</span><span class="p">[</span><span class="s">&#39;plannedStartDate_Mod&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="s">&#39;lt&#39;</span>

        <span class="n">params</span><span class="p">[</span><span class="s">&#39;project:statusEquatesWith&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="p">[</span><span class="s">&#39;CUR&#39;</span><span class="p">,</span> <span class="s">&#39;PLN&#39;</span><span class="p">,</span> <span class="s">&#39;TST&#39;</span><span class="p">]</span>
        <span class="n">params</span><span class="p">[</span><span class="s">&#39;project:statusEquatesWith_Mod&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="s">&#39;in&#39;</span>

        <span class="n">params</span><span class="p">[</span><span class="s">&#39;DE:project:Clover Notifications&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="s">&#39;On&#39;</span>
        <span class="n">params</span><span class="p">[</span><span class="s">&#39;DE:project:Clover Notifications_Mod&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="s">&#39;eq&#39;</span>

        <span class="n">params</span><span class="p">[</span><span class="s">&#39;DE:Send Notifications for This Task&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="s">&#39;Yes&#39;</span>
        <span class="n">params</span><span class="p">[</span><span class="s">&#39;DE:Send Notifications for This Task_Mod&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="s">&#39;eq&#39;</span>
        <span class="n">res</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">api</span><span class="o">.</span><span class="n">_parse_parameter_lists</span><span class="p">(</span><span class="n">params</span><span class="p">)</span>
        <span class="n">res</span> <span class="o">=</span> <span class="nb">sorted</span><span class="p">(</span><span class="n">res</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="s">&quot;&amp;&quot;</span><span class="p">))</span>
        <span class="n">golden</span> <span class="o">=</span> <span class="p">[</span><span class="s">&#39;DE:Send Notifications for This Task=Yes&#39;</span><span class="p">,</span> <span class="s">&#39;DE:Send Notifications for This Task_Mod=eq&#39;</span><span class="p">,</span>
                  <span class="s">&#39;DE:project:Clover Notifications=On&#39;</span><span class="p">,</span> <span class="s">&#39;DE:project:Clover Notifications_Mod=eq&#39;</span><span class="p">,</span>
                  <span class="s">&#39;assignedToID_Mod=notblank&#39;</span><span class="p">,</span> <span class="s">&#39;canStart=false&#39;</span><span class="p">,</span> <span class="s">&#39;canStart=maybe&#39;</span><span class="p">,</span> <span class="s">&#39;canStart=true&#39;</span><span class="p">,</span> <span class="s">&#39;canStart_Mod=in&#39;</span><span class="p">,</span>
                  <span class="s">&#39;percentComplete=100&#39;</span><span class="p">,</span> <span class="s">&#39;percentComplete_Mod=lt&#39;</span><span class="p">,</span> <span class="s">&#39;plannedStartDate=$$TODAY+5d&#39;</span><span class="p">,</span>
                  <span class="s">&#39;plannedStartDate_Mod=lt&#39;</span><span class="p">,</span> <span class="s">&#39;project:statusEquatesWith=CUR&#39;</span><span class="p">,</span> <span class="s">&#39;project:statusEquatesWith=PLN&#39;</span><span class="p">,</span>
                  <span class="s">&#39;project:statusEquatesWith=TST&#39;</span><span class="p">,</span> <span class="s">&#39;project:statusEquatesWith_Mod=in&#39;</span><span class="p">]</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">res</span><span class="p">,</span> <span class="n">golden</span><span class="p">)</span></div>

<div class="viewcode-block" id="TestWorkfront.test__make_request"><a class="viewcode-back" href="../../tests.html#tests.test_api.TestWorkfront.test__make_request">[docs]</a>    <span class="k">def</span> <span class="nf">test__make_request</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">path</span> <span class="o">=</span> <span class="s">&#39;/task/abc123&#39;</span>
        <span class="n">params</span> <span class="o">=</span> <span class="p">{</span><span class="s">&#39;a&#39;</span><span class="p">:</span> <span class="s">&#39;b&#39;</span><span class="p">}</span>
        <span class="n">method</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">api</span><span class="o">.</span><span class="n">GET</span>
        <span class="n">fields</span> <span class="o">=</span> <span class="p">[</span><span class="s">&#39;a&#39;</span><span class="p">,</span> <span class="s">&#39;b&#39;</span><span class="p">,</span> <span class="s">&#39;c&#39;</span><span class="p">]</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">api</span><span class="o">.</span><span class="n">_open_api_connection</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">api_response</span>

        <span class="n">res</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">api</span><span class="o">.</span><span class="n">_request</span><span class="p">(</span><span class="n">path</span><span class="p">,</span> <span class="n">params</span><span class="p">,</span> <span class="n">method</span><span class="p">,</span> <span class="n">fields</span><span class="p">)</span>
        <span class="n">golden</span> <span class="o">=</span> <span class="p">[{</span><span class="s">&#39;fields&#39;</span><span class="p">:</span> <span class="s">&#39;a,b,c&#39;</span><span class="p">},</span> <span class="p">{</span><span class="s">&#39;apiKey&#39;</span><span class="p">:</span> <span class="s">&#39;fc7t01vo9n6ft3osd528ym7m68dn7wwv&#39;</span><span class="p">},</span> <span class="p">{</span><span class="s">&#39;a&#39;</span><span class="p">:</span> <span class="s">&#39;b&#39;</span><span class="p">},</span> <span class="p">{</span><span class="s">&#39;method&#39;</span><span class="p">:</span> <span class="s">&#39;GET&#39;</span><span class="p">}]</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertCountEqual</span><span class="p">(</span><span class="n">res</span><span class="p">,</span> <span class="n">golden</span><span class="p">)</span></div></div>

    <span class="c"># @todo Make a unit test for count method</span>
    <span class="c"># @todo Make unit test for report</span>
    <span class="c"># @todo Make unit test for upload_document</span>
    <span class="c"># @todo Make unit test for make_document</span>
    <span class="c"># @todo Make unit test for post_document</span>
    <span class="c"># @todo Make unit test for make_update_as_user</span>
    <span class="c"># @todo Make unit test for _parse_post_param_list</span>
    <span class="c"># @todo Make unit test for _p_open_api_connection (maybe)</span>
    <span class="c"># @todo Make unit test for _request_upload_file</span>
    <span class="c"># @todo Make unit test for _p_upload_file</span>
    <span class="c"># @todo Make unit test for _set_authentication</span>
    <span class="c"># @todo Make unit test for _set_authentication</span>
</pre></div>

          </div>
        </div>
      </div>
      <div class="sphinxsidebar" role="navigation" aria-label="main navigation">
        <div class="sphinxsidebarwrapper">
<h1 class="logo"><a href="../../index.html">workfrontapi_plus</a></h1>








<h3>Navigation</h3>
<p class="caption"><span class="caption-text">Contents:</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../break_bulk_updates.html">break_bulk_updates module</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../setup.html">setup module</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../tests.html">tests package</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../wfconfig.html">wfconfig module</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../workfrontapi_plus.html">workfrontapi_plus package</a></li>
</ul>

<div class="relations">
<h3>Related Topics</h3>
<ul>
  <li><a href="../../index.html">Documentation overview</a><ul>
  <li><a href="../index.html">Module code</a><ul>
  </ul></li>
  </ul></li>
</ul>
</div>
<div id="searchbox" style="display: none" role="search">
  <h3>Quick search</h3>
    <form class="search" action="../../search.html" method="get">
      <div><input type="text" name="q" /></div>
      <div><input type="submit" value="Go" /></div>
      <input type="hidden" name="check_keywords" value="yes" />
      <input type="hidden" name="area" value="default" />
    </form>
</div>
<script type="text/javascript">$('#searchbox').show(0);</script>
        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="footer">
      &copy;2017, Integrated Device Technology.
      
      |
      Powered by <a href="http://sphinx-doc.org/">Sphinx 1.6.3</a>
      &amp; <a href="https://github.com/bitprophet/alabaster">Alabaster 0.7.10</a>
      
    </div>

    

    
  </body>
</html>